<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SILIC 2.0 - Gest√£o de Im√≥veis</title>
    <link rel="stylesheet" href="/src/styles/style.css?v=2.0">
    <link rel="stylesheet" href="/src/styles/modal-fix.css">
    <link rel="stylesheet" href="/src/styles/final-fix.css">
</head>
<body>
    <header class="modern-header">
        <div class="header-container">
            <div class="header-left">
                <img src="logo-caixa.svg" alt="CAIXA" class="logo-icon">
                <div class="header-title">
                    <h1>SILIC 2.0</h1>
                    <p class="subtitle">Prot√≥tipo - Gest√£o de Im√≥veis</p>
                </div>
            </div>
            <div class="header-right">
                <button id="voltarPortalBtn" class="btn-voltar-portal" onclick="voltarAoPortal()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Voltar ao Portal
                </button>
            </div>
        </div>
    </header>
    
    <main class="main-container">
        <!-- Dashboard de Estat√≠sticas -->
        <section class="dashboard-section">
            <h2 class="section-title">Gest√£o de Im√≥veis</h2>
            
            <div class="stats-grid">
                <!-- Card Principal -->
                <div class="stat-card-main">
                    <div class="stat-icon">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none">
                            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke="currentColor" stroke-width="2"/>
                            <polyline points="9 22 9 12 15 12 15 22" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="totalImoveis">0</div>
                        <div class="stat-label">Im√≥veis Cadastrados</div>
                    </div>
                </div>
                
                <!-- Cards de Status -->
                
                <!-- Cards de Status -->
                <div class="stat-card stat-disponivel">
                    <div class="stat-icon-small">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2"/>
                            <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-number" id="imoveisAtivos">0</div>
                    <div class="stat-label">Ativos</div>
                </div>
                
                <div class="stat-card stat-prospeccao">
                    <div class="stat-icon-small">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-number" id="imoveisProspeccao">0</div>
                    <div class="stat-label">Em Prospec√ß√£o</div>
                </div>
                
                <div class="stat-card stat-mobilizacao">
                    <div class="stat-icon-small">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            <polyline points="17 11 19 13 23 9" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-number" id="imoveisMobilizacao">0</div>
                    <div class="stat-label">Em Mobiliza√ß√£o</div>
                </div>
                
                <div class="stat-card stat-desmobilizacao">
                    <div class="stat-icon-small">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                            <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            <line x1="23" y1="9" x2="17" y2="15" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-number" id="imoveisDesmobilizacao">0</div>
                    <div class="stat-label">Em Desmobiliza√ß√£o</div>
                </div>
            </div>
        </section>

        <!-- Se√ß√£o de Listagem de Im√≥veis -->
        <section class="table-section">
            <div class="section-header">
                <h3 class="section-subtitle">Lista de Im√≥veis</h3>
            </div>

            <!-- Filtros -->
            <div class="filters-container">
                <div class="filter-group">
                    <input type="text" id="filtroContrato" class="filter-search" placeholder="üîç Contrato (ex: 10000000)">
                    
                    <select id="filtroUtilizacao" class="filter-select">
                        <option value="">Todas as utiliza√ß√µes</option>
                        <option value="Pr√≥prio">Pr√≥prio</option>
                        <option value="Terceiro">Terceiro</option>
                    </select>
                    
                    <select id="filtroStatus" class="filter-select">
                        <option value="">Todos os status</option>
                        <option value="Ativo">Ativo</option>
                        <option value="Em Prospec√ß√£o">Em Prospec√ß√£o</option>
                        <option value="Em Mobiliza√ß√£o">Em Mobiliza√ß√£o</option>
                        <option value="Em Desmobiliza√ß√£o">Em Desmobiliza√ß√£o</option>
                        <option value="Desativado">Desativado</option>
                    </select>
                    
                    <input type="text" id="filtroDenominacao" class="filter-search" placeholder="üîç Buscar denomina√ß√£o...">
                    
                    <input type="date" id="filtroDataInicio" class="filter-date" placeholder="Data in√≠cio">
                    
                    <input type="date" id="filtroDataFim" class="filter-date" placeholder="Data fim">
                </div>
                
                <div class="filter-actions">
                    <button id="limparFiltrosImoveis" class="btn-clear">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Limpar
                    </button>
                    
                    <button id="pesquisarImoveis" class="btn-primary">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Pesquisar
                    </button>
                </div>
            </div>

            <!-- Tabela de Im√≥veis -->
            <div class="table-wrapper">
                <table class="imoveis-table">
                    <thead>
                        <tr>
                            <th>Contrato</th>
                            <th>Denomina√ß√£o do contrato</th>
                            <th>Tipo contrato</th>
                            <th>Utiliza√ß√£o principal</th>
                            <th>Status</th>
                            <th>Fim da validade</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaImoveisBody">
                        <!-- Dados carregados dinamicamente -->
                    </tbody>
                </table>
            </div>

            <!-- Pagina√ß√£o -->
            <div class="pagination-container">
                <div class="pagination-info">
                    Mostrando <span id="paginationStart">0</span> a <span id="paginationEnd">0</span> de <span id="paginationTotal">0</span> im√≥veis
                </div>
                <div class="pagination-actions">
                    <select id="imoveisPorPaginaSelect" class="items-per-page">
                        <option value="10">10 por p√°gina</option>
                        <option value="25">25 por p√°gina</option>
                        <option value="50">50 por p√°gina</option>
                        <option value="100">100 por p√°gina</option>
                    </select>
                    <div class="pagination-controls" id="paginationControls">
                        <!-- Bot√µes de navega√ß√£o ser√£o inseridos aqui -->
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de Detalhes -->
    <div id="modalDetalhes" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Detalhes</h2>
                <button class="modal-close">√ó</button>
            </div>
            
            <div class="tabs">
                <button class="tab-btn active" data-tab="contrato">Contrato</button>
                <button class="tab-btn" data-tab="imovel">Im√≥vel</button>
                <button class="tab-btn" data-tab="locador">Locador</button>
                <button class="tab-btn" data-tab="servicos">Solicitar servi√ßos</button>
            </div>

            <div class="modal-body">
                <!-- Aba: Dados do Contrato -->
                <div id="tab-contrato" class="tab-content active">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>N√∫mero do Contrato</label>
                            <span id="detNumeroContrato"></span>
                        </div>
                        <div class="info-item">
                            <label>Denomina√ß√£o</label>
                            <span id="detDenominacao"></span>
                        </div>
                        <div class="info-item">
                            <label>Tipo de Contrato</label>
                            <span id="detTipoContrato"></span>
                        </div>
                        <div class="info-item">
                            <label>Data de In√≠cio</label>
                            <span id="detDataInicio"></span>
                        </div>
                        <div class="info-item">
                            <label>Data de T√©rmino</label>
                            <span id="detDataFim"></span>
                        </div>
                        <div class="info-item">
                            <label>Parceiro de Neg√≥cios</label>
                            <span id="detParceiro"></span>
                        </div>
                        <div class="info-item">
                            <label>Endere√ßo</label>
                            <span id="detEnderecoContrato"></span>
                        </div>
                        <div class="info-item">
                            <label>N√∫mero</label>
                            <span id="detNumeroEndereco"></span>
                        </div>
                    </div>
                </div>

                <!-- Aba: Dados do Im√≥vel -->
                <div id="tab-imovel" class="tab-content">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>C√≥digo Postal</label>
                            <span id="detCodPostal"></span>
                        </div>
                        <div class="info-item">
                            <label>Local</label>
                            <span id="detLocal"></span>
                        </div>
                        <div class="info-item">
                            <label>Rua</label>
                            <span id="detRua"></span>
                        </div>
                        <div class="info-item">
                            <label>Bairro</label>
                            <span id="detBairro"></span>
                        </div>
                        <div class="info-item">
                            <label>Cidade</label>
                            <span id="detCidade"></span>
                        </div>
                        <div class="info-item">
                            <label>Estado</label>
                            <span id="detEstado"></span>
                        </div>
                        <div class="info-item">
                            <label>CEP</label>
                            <span id="detCep"></span>
                        </div>
                        <div class="info-item">
                            <label>Tipo de Edif√≠cio</label>
                            <span id="detTipoEdificio"></span>
                        </div>
                        <div class="info-item">
                            <label>√Årea</label>
                            <span id="detArea"></span>
                        </div>
                        <div class="info-item">
                            <label>Valor</label>
                            <span id="detValor"></span>
                        </div>
                    </div>
                </div>

                <!-- Aba: Dados do Locador -->
                <div id="tab-locador" class="tab-content">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Parceiro de Neg√≥cios</label>
                            <span id="detParceiroNegocios"></span>
                        </div>
                        <div class="info-item">
                            <label>Tipo ID Fiscal</label>
                            <span id="detTipoIdFiscal"></span>
                        </div>
                        <div class="info-item">
                            <label>Denomina√ß√£o fun√ß√£o PN</label>
                            <span id="detDenominacaoFuncao"></span>
                        </div>
                        <div class="info-item">
                            <label>In√≠cio da rela√ß√£o</label>
                            <span id="detInicioRelacao"></span>
                        </div>
                        <div class="info-item">
                            <label>Fim da rela√ß√£o</label>
                            <span id="detFimRelacao"></span>
                        </div>
                        <div class="info-item">
                            <label>Nome</label>
                            <span id="detNomeLocador"></span>
                        </div>
                        <div class="info-item">
                            <label>C√≥digo postal</label>
                            <span id="detLocadorCep"></span>
                        </div>
                        <div class="info-item">
                            <label>Endere√ßo</label>
                            <span id="detLocadorEndereco"></span>
                        </div>
                        <div class="info-item">
                            <label>N√∫mero</label>
                            <span id="detLocadorNumero"></span>
                        </div>
                        <div class="info-item">
                            <label>Bairro</label>
                            <span id="detLocadorBairro"></span>
                        </div>
                        <div class="info-item">
                            <label>Local</label>
                            <span id="detLocadorLocal"></span>
                        </div>
                        <div class="info-item">
                            <label>UF</label>
                            <span id="detLocadorUf"></span>
                        </div>
                        <div class="info-item">
                            <label>Endere√ßo eletr√¥nico</label>
                            <span id="detLocadorEmail"></span>
                        </div>
                        <div class="info-item">
                            <label>Telefone fixo</label>
                            <span id="detLocadorTelefoneFixo"></span>
                        </div>
                        <div class="info-item">
                            <label>Telefone celular</label>
                            <span id="detLocadorTelefoneCelular"></span>
                        </div>
                    </div>
                </div>

                <!-- Aba: Solicitar Servi√ßos -->
                <div id="tab-servicos" class="tab-content">
                                        <style>
                        .card-grid .card{background:#fff;color:#24292f;transition:box-shadow .15s,border-color .15s,background .15s,color .15s}
                        .card-grid .card:hover{box-shadow:0 2px 8px rgba(0,0,0,.08);border-color:#9da7b1}
                        .card-grid .card.selected{border-color:#1f6feb; background:#1f6feb; color:#fff; box-shadow:0 0 0 2px rgba(31,111,235,.25)}
                        .card-grid .card.selected strong{color:#fff}
                        .card-grid .card.selected span{color:#e6eefc}
                        
                        .chip-row .chip{transition:background .15s,border-color .15s}
                        .chip-row .chip:hover{background:#f6f8fa}
                        .chip-row .chip.selected{border-color:#1f6feb; background:#1f6feb; color:#fff}
                        .mini-label{font-size:.8rem;color:#57606a}

                                                /* Responsividade do grid de A√ß√£o */
                                                @media (max-width: 1024px) {
                                                    #wizAcao { grid-template-columns: repeat(2, 1fr) !important; }
                                                    #wizCategoria { grid-template-columns: repeat(2, 1fr) !important; }
                                                }
                                                @media (max-width: 640px) {
                                                    #wizAcao { grid-template-columns: 1fr !important; }
                                                    #wizCategoria { grid-template-columns: 1fr !important; }
                                                }
                    </style>
                                                <div class="info-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 6px;">
                                                <div id="wizCategoriaBlock" class="info-item" style="grid-column: 1 / -1; display:grid; gap:6px;">
                                                            <label style="font-weight:600; margin-bottom:2px;">Categoria</label>
                                                        <div id="wizCategoria" class="card-grid" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:8px;"></div>
                                                </div>
                        
                                                <div id="wizAcaoBlock" class="info-item" style="grid-column: 1 / -1; display:grid; gap:8px;">
                                                            <label style="font-weight:600; margin-bottom:2px;">A√ß√£o</label>
                            
                                                        <div id="wizAcao" class="card-grid" style="display:grid; grid-template-columns: repeat(3, 1fr); gap:8px;"></div>
                                                </div>
                                                <div id="wizModalidadeBlock" class="info-item" style="grid-column: 1 / -1; display:grid; gap:8px;">
                                                            <label style="font-weight:600; margin-bottom:2px;">Modalidade</label>
                            <div id="wizModalidade" class="chip-row" style="display:flex; flex-wrap:wrap; gap:8px;"></div>
                        </div>

                        <div class="info-item" style="grid-column: 1 / -1;">
                            <div id="servicoDescricao" style="margin-top:.5rem;color:#555"></div>
                        </div>
                        <div class="info-item" style="grid-column: 1 / -1; display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
                            <div>
                                <label>Dados que ser√£o enviados</label>
                                <ul id="dadosPreenchidos" style="list-style: none; padding-left: 0;"></ul>
                            </div>
                            <div>
                                <label>Dados faltantes</label>
                                <ul id="dadosPendentes" style="list-style: none; padding-left: 0;"></ul>
                            </div>
                        </div>
                        <div class="info-item" style="grid-column: 1 / -1;">
                            <label>Pr√©-visualiza√ß√£o do payload</label>
                            <pre id="payloadPreview" style="background:#f6f8fa;border:1px solid #e1e4e8;border-radius:6px;padding:6px;overflow:auto;max-height:180px"></pre>
                        </div>
                        <div class="info-item" style="grid-column: 1 / -1; display:flex; gap:.5rem; align-items:center;">
                            <button id="btnSolicitarServico" class="btn-primary" disabled>Solicitar servi√ßos</button>
                        </div>
                    </div>
                </div>

                <!-- Aba: Dados do Locador -->
                <div id="tab-locador" class="tab-content">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Nome Completo</label>
                            <span id="detNomeLocador"></span>
                        </div>
                        <div class="info-item">
                            <label>CPF/CNPJ</label>
                            <span id="detCpfCnpj"></span>
                        </div>
                        <div class="info-item">
                            <label>Tipo</label>
                            <span id="detTipoLocador"></span>
                        </div>
                        <div class="info-item">
                            <label>Telefone</label>
                            <span id="detTelefone"></span>
                        </div>
                        <div class="info-item">
                            <label>Celular</label>
                            <span id="detCelular"></span>
                        </div>
                        <div class="info-item">
                            <label>E-mail</label>
                            <span id="detEmail"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rodap√© Moderno -->
    <footer class="modern-footer">
        <div class="footer-container">
            <div class="footer-columns">
                <div class="footer-brand">
                    <h4>SILIC 2.0</h4>
                    <p class="brand-tagline">Solu√ß√µes para todos os momentos.</p>
                </div>
                <div class="footer-contact">
                    <h5>Contato</h5>
                    <a class="footer-mail" href="mailto:silic@caixa.gov.br">silic@caixa.gov.br</a>
                </div>
            </div>
        </div>
    </footer>

    

    <!-- Bootstrap sem scripts inline -->
    <script type="module" src="/src/init.ts"></script>
    <!-- Toast container -->
    <div id="toastContainer" style="position:fixed;top:16px;right:16px;z-index:1000;display:flex;flex-direction:column;gap:8px"></div>
</body>
</html>