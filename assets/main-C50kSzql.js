import"./main-Dl1iu8in.js";class E{static generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static formatDocument(e){const t=e.replace(/\D/g,"");return t.length===11?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):t.length===14?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):e}static formatCEP(e){return e.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2")}static formatMoney(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}static formatCurrency(e){return this.formatMoney(e)}static formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}static applyMask(e,t){e.addEventListener("input",a=>{const i=a.target;let o=i.value.replace(/\D/g,"");switch(t){case"cep":o.length<=8&&(o=o.replace(/(\d{5})(\d)/,"$1-$2"));break;case"phone":o.length<=11&&(o=o.replace(/(\d{2})(\d)/,"($1) $2"),o=o.replace(/(\d{4,5})(\d{4})$/,"$1-$2"));break;case"cpf":o.length<=11&&(o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d{2})$/,"$1-$2"));break;case"cnpj":o.length<=14&&(o=o.replace(/(\d{2})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1/$2"),o=o.replace(/(\d{4})(\d{2})$/,"$1-$2"));break}i.value=o})}static debounce(e,t){let a;return(...i)=>{clearTimeout(a),a=setTimeout(()=>e(...i),t)}}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static validators={cpf:e=>{const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1+$/.test(t))return!1;let a=0;for(let o=0;o<9;o++)a+=parseInt(t[o])*(10-o);let i=a*10%11;if((i===10||i===11)&&(i=0),i!==parseInt(t[9]))return!1;a=0;for(let o=0;o<10;o++)a+=parseInt(t[o])*(11-o);return i=a*10%11,(i===10||i===11)&&(i=0),i===parseInt(t[10])},cnpj:e=>{const t=e.replace(/\D/g,"");if(t.length!==14||/^(\d)\1+$/.test(t))return!1;let a=0,i=5;for(let s=0;s<12;s++)a+=parseInt(t[s])*i--,i<2&&(i=9);let o=a%11<2?0:11-a%11;if(o!==parseInt(t[12]))return!1;a=0,i=6;for(let s=0;s<13;s++)a+=parseInt(t[s])*i--,i<2&&(i=9);return o=a%11<2?0:11-a%11,o===parseInt(t[13])},email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),cep:e=>e.replace(/\D/g,"").length===8}}class P{imoveis=[];imoveisOriginais=[];locadores=[];usandoDadosSAP=!1;currentPage=1;itemsPerPage=10;currentPageImoveis=1;itemsPerPageImoveis=10;currentView="table";constructor(){this.usandoDadosSAP=!1,this.carregarDadosDemo(),this.configurarFiltrosImoveisImediato(),this.configurarItemsPorPagina(),this.atualizarTabelaImoveis(),this.atualizarDashboard()}getEstadoByCidade(e){return{"S√£o Paulo":"SP","Rio de Janeiro":"RJ",Bras√≠lia:"DF",Salvador:"BA",Fortaleza:"CE","Belo Horizonte":"MG",Manaus:"AM",Curitiba:"PR",Recife:"PE",Goi√¢nia:"GO"}[e]||"SP"}gerarCPF(){const e=Array.from({length:9},()=>Math.floor(Math.random()*10));let t=0;for(let o=0;o<9;o++)t+=e[o]*(10-o);const a=t*10%11%10;t=0;for(let o=0;o<9;o++)t+=e[o]*(11-o);t+=a*2;const i=t*10%11%10;return E.formatDocument([...e,a,i].join(""))}gerarCNPJ(){const e=Array.from({length:8},()=>Math.floor(Math.random()*10));e.push(0,0,0,1);let t=0,a=5;for(let s=0;s<12;s++)t+=e[s]*a--,a<2&&(a=9);const i=t%11<2?0:11-t%11;t=0,a=6;for(let s=0;s<12;s++)t+=e[s]*a--,a<2&&(a=9);t+=i*2;const o=t%11<2?0:11-t%11;return E.formatDocument([...e,i,o].join(""))}gerarTelefone(){const e=Math.floor(Math.random()*89)+11,t=Math.floor(Math.random()*9e8)+1e8;return`(${e}) ${t.toString().slice(0,5)}-${t.toString().slice(5)}`}carregarDadosDemo(){this.locadores=[{id:"loc-1",nome:"Jo√£o da Silva",tipo:"fisica",documento:this.gerarCPF(),email:"joao.silva@example.com",telefone:this.gerarTelefone(),endereco:{logradouro:"Rua das Flores",numero:"123",bairro:"Centro",cidade:"S√£o Paulo",estado:"SP",cep:"01000-000"},status:"ativo",dataRegistro:new Date().toISOString()},{id:"loc-2",nome:"Im√≥veis XYZ Ltda",tipo:"juridica",documento:this.gerarCNPJ(),email:"contato@imoveisxyz.com.br",telefone:this.gerarTelefone(),endereco:{logradouro:"Av. Paulista",numero:"1500",bairro:"Bela Vista",cidade:"S√£o Paulo",estado:"SP",cep:"01310-000"},status:"ativo",dataRegistro:new Date().toISOString()}],this.imoveisOriginais=this.gerarImoveisDemo(100),this.imoveis=[...this.imoveisOriginais]}gerarImoveisDemo(e){const t=["S√£o Paulo","Rio de Janeiro","Bras√≠lia","Salvador","Fortaleza","Belo Horizonte","Manaus","Curitiba","Recife","Goi√¢nia"],a=["Centro","Jardim","Vila Nova","Boa Vista","Industrial","Comercial"],i=["Pr√≥prio","Terceiro"],o=["ativo","prospeccao","mobilizacao","desmobilizacao"],s=[];for(let n=0;n<e;n++){const r=t[n%t.length],c=this.getEstadoByCidade(r),m=a[n%a.length],f=(1e7+n).toString(),p=Math.round(80+Math.random()*920),l=+(1500+Math.random()*8500).toFixed(2),u=String(1+Math.floor(Math.random()*27)).padStart(2,"0"),h=String(1+Math.floor(Math.random()*12)).padStart(2,"0"),d=String(2026+Math.floor(Math.random()*4)),g=`${u}/${h}/${d}`;s.push({id:`imo-${n+1}`,codigo:f,denominacao:`Contrato ${f} - Unidade ${r}`,tipoContrato:"Contrato de Loca√ß√£o - Im√≥veis",utilizacaoPrincipal:i[n%i.length],fimValidade:g,endereco:`Rua Exemplo ${n+1}`,bairro:m,cidade:r,cep:`${String(1e4+n).padStart(5,"0")}-${String(100+n).padStart(3,"0")}`,estado:c,tipo:"comercial",status:o[n%o.length],area:p,valor:l,descricao:"Im√≥vel gerado para demonstra√ß√£o.",fotos:[],caracteristicas:{quartos:0,banheiros:2,garagem:0},locadorId:this.locadores[n%this.locadores.length].id,dataRegistro:new Date().toISOString(),dataAtualizacao:new Date().toISOString(),tipoEdificioCodigo:"01",parceiroNegocios:this.locadores[n%this.locadores.length].nome,tipoIdFiscal:this.locadores[n%this.locadores.length].tipo==="fisica"?"CPF":"CNPJ",numeroIdFiscal:this.locadores[n%this.locadores.length].documento,denominacaoFuncaoPN:"Proponente Credor",inicioRelacao:"01/01/2025",fimRelacao:`31/12/${d}`})}return s}mostrarFormulario(){}adicionarImovel(){}limparFormulario(){}adicionarLocador(){}alterarVisualizacao(e){this.currentView=e}filtrarLocadores(){}limparFiltros(){}atualizarListaLocadores(){}atualizarTabelaImoveis(){const e=document.querySelector(".imoveis-table tbody");if(!e){console.warn("Tabela de im√≥veis n√£o encontrada");return}e.innerHTML="";const t=(this.currentPageImoveis-1)*this.itemsPerPageImoveis,a=t+this.itemsPerPageImoveis;this.imoveis.slice(t,a).forEach(o=>{const s=document.createElement("tr");s.style.cursor="pointer";const n=`badge badge-${o.status}`,r=o.fimValidade||"-";s.innerHTML=`
        <td>${o.codigo}</td>
        <td>${o.denominacao}</td>
        <td>${o.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"}</td>
        <td>${o.utilizacaoPrincipal||"-"}</td>
        <td><span class="${n}">${this.formatarStatus(o.status)}</span></td>
        <td>${r}</td>
        <td>
          <button class="btn-table-action" data-id="${o.id}">
            Ver Detalhes
          </button>
        </td>
      `,s.addEventListener("click",m=>{m.target.classList.contains("btn-table-action")||this.abrirModalDetalhes(o.id)});const c=s.querySelector(".btn-table-action");c&&c.addEventListener("click",m=>{m.stopPropagation(),this.abrirModalDetalhes(o.id)}),e.appendChild(s)}),this.atualizarPaginacaoImoveis()}aplicarMascaraCEP(){const e=document.getElementById("cep");e&&E.applyMask(e,"cep")}fecharModalDetalhes(){const e=document.getElementById("modalDetalhes");e&&e.classList.remove("active")}abrirModalDetalhes(e){const t=this.imoveis.find(i=>i.id===e);if(!t){console.error("Im√≥vel n√£o encontrado:",e);return}this.preencherModalDetalhes(t);const a=document.getElementById("modalDetalhes");if(a){a.classList.add("active");const i=a.querySelector(".modal-close");i&&i.addEventListener("click",()=>this.fecharModalDetalhes()),a.addEventListener("click",o=>{o.target===a&&this.fecharModalDetalhes()})}this.configurarTabs(),this.inicializarAbaServicos(t)}preencherModalDetalhes(e){const t=document.querySelector(".modal-header h2");t&&(t.textContent="Detalhes do Im√≥vel"),this.setElementText("detNumeroContrato",e.codigo||"-"),this.setElementText("detDenominacao",e.denominacao||`${e.endereco}, ${e.bairro}`),this.setElementText("detTipoContrato",e.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"),this.setElementText("detDataInicio",e.dataRegistro?new Date(e.dataRegistro).toLocaleDateString("pt-BR"):"-"),this.setElementText("detDataFim",e.fimValidade||"-"),this.setElementText("detParceiro",e.parceiroNegocios||"-"),this.setElementText("detEnderecoContrato",e.endereco||"-"),this.setElementText("detNumeroEndereco",e.numeroPN||"-"),this.setElementText("detCodPostal",e.cep||"-"),this.setElementText("detLocal",e.estado||"-"),this.setElementText("detRua",e.endereco||"-"),this.setElementText("detBairro",e.bairro||"-"),this.setElementText("detCidade",e.cidade||"-"),this.setElementText("detEstado",e.estado||"-"),this.setElementText("detCep",e.cep||"-"),this.setElementText("detTipoEdificio",e.tipoEdificioCodigo||"-"),this.setElementText("detArea",e.area?`${e.area} m¬≤`:"-"),this.setElementText("detValor",e.valor?`R$ ${e.valor.toFixed(2)}`:"-");const a=this.locadores.find(i=>i.status==="ativo");this.setElementText("detParceiroNegocios",a?a.nome:"-"),this.setElementText("detTipoIdFiscal",a?a.tipo==="fisica"?"CPF":"CNPJ":"-"),this.setElementText("detDenominacaoFuncao","Proponente Credor"),this.setElementText("detInicioRelacao",e.inicioRelacao||"-"),this.setElementText("detFimRelacao",e.fimRelacao||"-"),this.setElementText("detNomeLocador",a?a.nome:"-"),this.setElementText("detLocadorCep",a?.endereco?.cep||"-"),this.setElementText("detLocadorEndereco",a?.endereco?.logradouro||"-"),this.setElementText("detLocadorNumero",a?.endereco?.numero||"-"),this.setElementText("detLocadorBairro",a?.endereco?.bairro||"-"),this.setElementText("detLocadorLocal",a?.endereco?.cidade||"-"),this.setElementText("detLocadorUf",a?.endereco?.estado||"-"),this.setElementText("detLocadorEmail",a?.email||"-"),this.setElementText("detLocadorTelefoneFixo",a?.telefone||"-"),this.setElementText("detLocadorTelefoneCelular","-")}inicializarAbaServicos(e){const t=document.getElementById("svcCategoria"),a=document.getElementById("svcAcao"),i=document.getElementById("svcModalidade"),o=document.getElementById("servicoDescricao"),s=document.getElementById("dadosPreenchidos"),n=document.getElementById("dadosPendentes"),r=document.getElementById("btnSolicitarServico");if(!t||!a||!i||!o||!s||!n||!r)return;const c=this.carregarServicosHierarquia(),m=l=>{if(a.innerHTML='<option value="">Selecione...</option>',i.innerHTML='<option value="">Selecione...</option>',a.disabled=!l,i.disabled=!0,!l)return;const u=Object.keys(c[l]||{});for(const h of u){const d=document.createElement("option");d.value=h,d.textContent=this.capitalize(h.replace(/-/g," ")),a.appendChild(d)}},f=(l,u)=>{if(i.innerHTML='<option value="">Selecione...</option>',i.disabled=!(l&&u),!(l&&u))return;const h=Object.keys(c[l]?.[u]||{});for(const d of h){const g=document.createElement("option");g.value=d,g.textContent=d==="nao-se-aplica"?"N√£o se aplica":this.capitalize(d),i.appendChild(g)}},p=()=>{const l=t.value,u=a.value,h=i.value,d=c[l]?.[u]?.[h];if(!d){o.textContent="",s.innerHTML="",n.innerHTML="",r.disabled=!0;return}o.textContent=d.descricao,this.atualizarResumoDados(s,n,d,e),r.disabled=!this.validarRequisitos(d,e)};t.addEventListener("change",()=>{m(t.value),p()}),a.addEventListener("change",()=>{f(t.value,a.value),p()}),i.addEventListener("change",p),r.addEventListener("click",()=>{const l=t.value,u=a.value,h=i.value,d=c[l]?.[u]?.[h];if(!d)return;const g=this.montarPayloadSolicitacao({id:d.id,nome:d.nome},e);console.log("üì¶ Solicita√ß√£o (prot√≥tipo):",g),this.showToast('Solicita√ß√£o registrada. Seus dados foram encaminhados ao m√≥dulo "Solicitar servi√ßos". Em breve voc√™ poder√° acompanhar o andamento.')}),m(t.value),p()}carregarServicosHierarquia(){const e=(t,a,i,o,s)=>({id:`${t}-${a}-${i}`,nome:`${this.capitalize(t.replace(/-/g," "))} - ${this.capitalize(a.replace(/-/g," "))} - ${this.capitalize(i)}`,descricao:o,requisitos:s});return{contratacao:{"nova-unidade":{locacao:e("contratacao","nova-unidade","locacao","Nova unidade via loca√ß√£o.",["cep","endereco","cidade","estado"]),cessao:e("contratacao","nova-unidade","cessao","Nova unidade via cess√£o.",["cep","endereco","cidade","estado"]),comodato:e("contratacao","nova-unidade","comodato","Nova unidade via comodato.",["cep","endereco","cidade","estado"])},"mudanca-endereco":{locacao:e("contratacao","mudanca-endereco","locacao","Mudan√ßa de endere√ßo (loca√ß√£o).",["cep","endereco","cidade","estado"]),cessao:e("contratacao","mudanca-endereco","cessao","Mudan√ßa de endere√ßo (cess√£o).",["cep","endereco","cidade","estado"]),comodato:e("contratacao","mudanca-endereco","comodato","Mudan√ßa de endere√ßo (comodato).",["cep","endereco","cidade","estado"])},regularizacao:{locacao:e("contratacao","regularizacao","locacao","Regulariza√ß√£o contratual (loca√ß√£o).",["fimValidade"]),cessao:e("contratacao","regularizacao","cessao","Regulariza√ß√£o contratual (cess√£o).",["fimValidade"]),comodato:e("contratacao","regularizacao","comodato","Regulariza√ß√£o contratual (comodato).",["fimValidade"])}},"ato-formal":{prorrogacao:{locacao:e("ato-formal","prorrogacao","locacao","Prorroga√ß√£o de contrato (loca√ß√£o).",["fimValidade"]),cessao:e("ato-formal","prorrogacao","cessao","Prorroga√ß√£o de contrato (cess√£o).",["fimValidade"]),comodato:e("ato-formal","prorrogacao","comodato","Prorroga√ß√£o de contrato (comodato).",["fimValidade"])},rescisao:{"nao-se-aplica":e("ato-formal","rescisao","nao-se-aplica","Rescis√£o contratual.",["fimValidade"])},"alteracao-titularidade":{"nao-se-aplica":e("ato-formal","alteracao-titularidade","nao-se-aplica","Altera√ß√£o de titularidade.",["fimValidade"])},"antecipacao-parcela":{"nao-se-aplica":e("ato-formal","antecipacao-parcela","nao-se-aplica","Antecipa√ß√£o de parcela.",["fimValidade"])},"recebimento-imovel":{"nao-se-aplica":e("ato-formal","recebimento-imovel","nao-se-aplica","Recebimento de im√≥vel.",["cep","endereco","cidade","estado"])},"acrescimo-area":{"nao-se-aplica":e("ato-formal","acrescimo-area","nao-se-aplica","Acr√©scimo de √°rea contratada.",["fimValidade"])},"supressao-area":{"nao-se-aplica":e("ato-formal","supressao-area","nao-se-aplica","Supress√£o de √°rea contratada.",["fimValidade"])},"revisao-aluguel":{"nao-se-aplica":e("ato-formal","revisao-aluguel","nao-se-aplica","Revis√£o de aluguel.",["fimValidade"])},"reajuste-aluguel":{"nao-se-aplica":e("ato-formal","reajuste-aluguel","nao-se-aplica","Reajuste de aluguel.",["fimValidade"])},apostilamento:{"nao-se-aplica":e("ato-formal","apostilamento","nao-se-aplica","Apostilamento contratual.",["fimValidade"])},"acao-renovatoria":{"nao-se-aplica":e("ato-formal","acao-renovatoria","nao-se-aplica","A√ß√£o renovat√≥ria.",["fimValidade"])}}}}popularServicosSelect(e,t){e.innerHTML="";for(const a of t){const i=document.createElement("option");i.value=a.id,i.textContent=a.nome,e.appendChild(i)}}filtrarServicos(e,t,a){const i=a.toLowerCase(),o=t.filter(s=>s.nome.toLowerCase().includes(i));this.popularServicosSelect(e,o.length?o:t)}validarRequisitos(e,t){const a=i=>{switch(i){case"cep":return!!t.cep;case"endereco":return!!t.endereco;case"cidade":return!!t.cidade;case"estado":return!!t.estado;case"fimValidade":return!!t.fimValidade;default:return!0}};return e.requisitos.every(a)}atualizarResumoDados(e,t,a,i){e.innerHTML="",t.innerHTML="";const o=[{key:"cep",label:"CEP",value:i.cep},{key:"endereco",label:"Endere√ßo",value:i.endereco},{key:"cidade",label:"Cidade",value:i.cidade},{key:"estado",label:"UF",value:i.estado},{key:"fimValidade",label:"Fim da validade",value:i.fimValidade}];for(const s of o){const n=document.createElement("li");n.textContent=s.value?`${s.label}: ${s.value}`:`${s.label}: ‚Äî`,s.value?n.style.color="#2e7d32":n.style.color="#b26a00",(s.value?e:t).appendChild(n)}}montarPayloadSolicitacao(e,t){return{servico:{id:e.id,nome:e.nome},imovel:{id:t.id,codigo:t.codigo,endereco:t.endereco,cep:t.cep,cidade:t.cidade,estado:t.estado,fimValidade:t.fimValidade},origem:this.usandoDadosSAP?"SAP":"Demo",criadoEm:new Date().toISOString()}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}setElementText(e,t){const a=document.getElementById(e);a&&(a.textContent=t)}setInputValue(e,t){const a=document.getElementById(e);a&&(a.value=t||"")}addEventListenerSafe(e,t,a){const i=document.getElementById(e);i&&i.addEventListener(t,a)}showToast(e){const t=document.getElementById("toastContainer");if(!t){alert(e);return}const a=document.createElement("div");a.textContent=e,a.style.background="#2e7d32",a.style.color="#fff",a.style.padding="10px 14px",a.style.borderRadius="6px",a.style.boxShadow="0 2px 8px rgba(0,0,0,.15)",a.style.fontSize=".95rem",a.style.maxWidth="360px",t.appendChild(a),setTimeout(()=>{a.style.transition="opacity .3s",a.style.opacity="0",setTimeout(()=>a.remove(),300)},2500)}validarData(e,t=!1){if(!e)return t;const a=e.match(/^([0-3]\d)\/(0\d|1[0-2])\/(\d{4})$/);if(!a)return!1;const i=parseInt(a[1],10),o=parseInt(a[2],10),s=parseInt(a[3],10),n=new Date(s,o-1,i);return n.getFullYear()===s&&n.getMonth()===o-1&&n.getDate()===i}mostrarErro(e,t,a){const i=document.getElementById(e);i&&(i.style.display=t?"block":"none",a&&(i.textContent=a))}formatarStatus(e){return{ativo:"Ativo",prospeccao:"Prospec√ß√£o",mobilizacao:"Mobiliza√ß√£o",desmobilizacao:"Desmobiliza√ß√£o",disponivel:"Dispon√≠vel",ocupado:"Ocupado",manutencao:"Manuten√ß√£o",vendido:"Vendido"}[e]||e}configurarTabs(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");e.forEach((a,i)=>{a.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("active")),t.forEach(o=>o.classList.remove("active")),a.classList.add("active"),t[i]&&t[i].classList.add("active")})})}atualizarPaginacaoImoveis(){const e=(this.currentPageImoveis-1)*this.itemsPerPageImoveis+1,t=Math.min(this.currentPageImoveis*this.itemsPerPageImoveis,this.imoveis.length),a=this.imoveis.length;this.setElementText("paginationStart",e.toString()),this.setElementText("paginationEnd",t.toString()),this.setElementText("paginationTotal",a.toString()),this.gerarBotoesPaginacao()}gerarBotoesPaginacao(){const e=document.getElementById("paginationControls");if(!e)return;e.innerHTML="";const t=Math.ceil(this.imoveis.length/this.itemsPerPageImoveis);if(t<=1)return;const a=document.createElement("button");a.innerHTML="‚Üê Anterior",a.disabled=this.currentPageImoveis===1,a.addEventListener("click",()=>{this.currentPageImoveis>1&&(this.currentPageImoveis--,this.atualizarTabelaImoveis())}),e.appendChild(a);const i=5;let o=Math.max(1,this.currentPageImoveis-Math.floor(i/2)),s=Math.min(t,o+i-1);if(s-o<i-1&&(o=Math.max(1,s-i+1)),o>1){const r=document.createElement("button");if(r.textContent="1",r.addEventListener("click",()=>{this.currentPageImoveis=1,this.atualizarTabelaImoveis()}),e.appendChild(r),o>2){const c=document.createElement("button");c.textContent="...",c.disabled=!0,e.appendChild(c)}}for(let r=o;r<=s;r++){const c=document.createElement("button");c.textContent=r.toString(),c.classList.toggle("active",r===this.currentPageImoveis);const m=r;c.addEventListener("click",()=>{this.currentPageImoveis=m,this.atualizarTabelaImoveis()}),e.appendChild(c)}if(s<t){if(s<t-1){const c=document.createElement("button");c.textContent="...",c.disabled=!0,e.appendChild(c)}const r=document.createElement("button");r.textContent=t.toString(),r.addEventListener("click",()=>{this.currentPageImoveis=t,this.atualizarTabelaImoveis()}),e.appendChild(r)}const n=document.createElement("button");n.innerHTML="Pr√≥ximo ‚Üí",n.disabled=this.currentPageImoveis===t,n.addEventListener("click",()=>{this.currentPageImoveis<t&&(this.currentPageImoveis++,this.atualizarTabelaImoveis())}),e.appendChild(n)}configurarItemsPorPagina(){const e=document.getElementById("imoveisPorPaginaSelect");e&&e.addEventListener("change",()=>{const t=parseInt(e.value,10);!isNaN(t)&&t>0&&(this.itemsPerPageImoveis=t,this.currentPageImoveis=1,this.atualizarTabelaImoveis())})}configurarFiltrosImoveisImediato(){this.addEventListenerSafe("pesquisarImoveis","click",()=>{this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("limparFiltrosImoveis","click",()=>{this.limparFiltrosImoveis()}),this.addEventListenerSafe("filtroContrato","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("filtroDenominacao","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()})}aplicarFiltrosImoveis(){console.log("üîç Aplicando filtros de im√≥veis...");const e=document.getElementById("filtroContrato")?.value.toLowerCase()||"",t=document.getElementById("filtroUtilizacao")?.value||"",a=document.getElementById("filtroStatus")?.value||"",i=document.getElementById("filtroDenominacao")?.value.toLowerCase()||"",o=document.getElementById("filtroDataInicio")?.value||"",s=document.getElementById("filtroDataFim")?.value||"";this.imoveis=this.imoveisOriginais.filter(n=>{if(e&&!n.codigo.toLowerCase().includes(e)||t&&n.utilizacaoPrincipal!==t)return!1;if(a){const r={Ativo:"ativo","Em Prospec√ß√£o":"prospeccao","Em Mobiliza√ß√£o":"mobilizacao","Em Desmobiliza√ß√£o":"desmobilizacao",Desativado:"desativado"};if(n.status!==r[a])return!1}if(i&&!n.denominacao.toLowerCase().includes(i))return!1;if(o||s){if(n.fimValidade){const[r,c,m]=n.fimValidade.split("/"),f=new Date(parseInt(m),parseInt(c)-1,parseInt(r));if(o){const p=new Date(o);if(f<p)return!1}if(s){const p=new Date(s);if(f>p)return!1}}else if(o||s)return!1}return!0}),this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log(`‚úÖ Filtros aplicados: ${this.imoveis.length} im√≥veis encontrados`)}limparFiltrosImoveis(){const e=document.getElementById("filtroContrato"),t=document.getElementById("filtroUtilizacao"),a=document.getElementById("filtroStatus"),i=document.getElementById("filtroDenominacao"),o=document.getElementById("filtroDataInicio"),s=document.getElementById("filtroDataFim");e&&(e.value=""),t&&(t.value=""),a&&(a.value=""),i&&(i.value=""),o&&(o.value=""),s&&(s.value=""),this.imoveis=[...this.imoveisOriginais],this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log("üßπ Filtros limpos")}atualizarDashboard(){const e=this.calcularEstatisticas();this.setElementText("totalImoveis",e.totalImoveis.toString()),this.setElementText("imoveisAtivos",e.imoveisAtivos.toString()),this.setElementText("imoveisProspeccao",e.imoveisProspeccao.toString()),this.setElementText("imoveisMobilizacao",e.imoveisMobilizacao.toString()),this.setElementText("imoveisDesmobilizacao",e.imoveisDesmobilizacao.toString())}calcularEstatisticas(){return{totalImoveis:this.imoveis.length,imoveisAtivos:this.imoveis.filter(e=>e.status==="ativo").length,imoveisProspeccao:this.imoveis.filter(e=>e.status==="prospeccao").length,imoveisMobilizacao:this.imoveis.filter(e=>e.status==="mobilizacao").length,imoveisDesmobilizacao:this.imoveis.filter(e=>e.status==="desmobilizacao").length,totalLocadores:this.locadores.length}}}function S(){const v="https://osvaldojeronymo.github.io/silic-portal-imoveis/",e=document.referrer,t=window.location.search.includes("from=portal");(e.includes("silic-portal")||t)&&window.history.length>1?window.history.back():window.location.href=v}export{P as SistemaSILIC,S as voltarAoPortal};
