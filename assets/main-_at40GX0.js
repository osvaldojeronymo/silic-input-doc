import"./main-DQWV2R43.js";import"./modulepreload-polyfill-B5Qt9EMX.js";class M{static generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static formatDocument(e){const t=e.replace(/\D/g,"");return t.length===11?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):t.length===14?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):e}static formatCEP(e){return e.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2")}static formatMoney(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}static formatCurrency(e){return this.formatMoney(e)}static formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}static applyMask(e,t){e.addEventListener("input",o=>{const i=o.target;let a=i.value.replace(/\D/g,"");switch(t){case"cep":a.length<=8&&(a=a.replace(/(\d{5})(\d)/,"$1-$2"));break;case"phone":a.length<=11&&(a=a.replace(/(\d{2})(\d)/,"($1) $2"),a=a.replace(/(\d{4,5})(\d{4})$/,"$1-$2"));break;case"cpf":a.length<=11&&(a=a.replace(/(\d{3})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d{2})$/,"$1-$2"));break;case"cnpj":a.length<=14&&(a=a.replace(/(\d{2})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d)/,"$1.$2"),a=a.replace(/(\d{3})(\d)/,"$1/$2"),a=a.replace(/(\d{4})(\d{2})$/,"$1-$2"));break}i.value=a})}static debounce(e,t){let o;return(...i)=>{clearTimeout(o),o=setTimeout(()=>e(...i),t)}}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static validators={cpf:e=>{const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1+$/.test(t))return!1;let o=0;for(let a=0;a<9;a++)o+=parseInt(t[a])*(10-a);let i=o*10%11;if((i===10||i===11)&&(i=0),i!==parseInt(t[9]))return!1;o=0;for(let a=0;a<10;a++)o+=parseInt(t[a])*(11-a);return i=o*10%11,(i===10||i===11)&&(i=0),i===parseInt(t[10])},cnpj:e=>{const t=e.replace(/\D/g,"");if(t.length!==14||/^(\d)\1+$/.test(t))return!1;let o=0,i=5;for(let n=0;n<12;n++)o+=parseInt(t[n])*i--,i<2&&(i=9);let a=o%11<2?0:11-o%11;if(a!==parseInt(t[12]))return!1;o=0,i=6;for(let n=0;n<13;n++)o+=parseInt(t[n])*i--,i<2&&(i=9);return a=o%11<2?0:11-o%11,a===parseInt(t[13])},email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),cep:e=>e.replace(/\D/g,"").length===8}}function G(p){switch(p){case"mudanca-endereco":return"Mudan√ßa de Endere√ßo";case"regularizacao":return"Regulariza√ß√£o";case"ato-formal":return"Ato Formal";default:return z(p)}}function N(p,e){if(e==="nao-se-aplica")return"N√£o se aplica";if(p==="ato-formal")switch(e){case"prorrogacao":return"Prorroga√ß√£o";case"rescisao":return"Rescis√£o";case"alteracao-titularidade":return"Altera√ß√£o de titularidade";case"antecipacao-parcela":return"Antecipa√ß√£o de parcela";case"recebimento-imovel":return"Recebimento de im√≥vel";case"acrescimo-area":return"Acr√©scimo de √°rea";case"supressao-area":return"Supress√£o de √°rea";case"revisao-aluguel":return"Revis√£o de aluguel";case"reajuste-aluguel":return"Reajuste de aluguel";case"apostilamento":return"Apostilamento";case"acao-renovatoria":return"A√ß√£o renovat√≥ria"}return z(e)}function q(p){switch(p){case"nao-se-aplica":return"N√£o se aplica";case"locacao":return"Loca√ß√£o";case"cessao":return"Cess√£o";case"comodato":return"Comodato";default:return z(p)}}function z(p){if(!p)return p;const e=p.replace(/-/g," ");return e.charAt(0).toUpperCase()+e.slice(1)}class U{imoveis=[];imoveisOriginais=[];locadores=[];usandoDadosSAP=!1;currentPage=1;itemsPerPage=10;currentPageImoveis=1;itemsPerPageImoveis=10;currentView="table";constructor(){this.usandoDadosSAP=!1,this.carregarDadosDemo(),this.configurarFiltrosImoveisImediato(),this.configurarItemsPorPagina(),this.atualizarTabelaImoveis(),this.atualizarDashboard()}getEstadoByCidade(e){return{"S√£o Paulo":"SP","Rio de Janeiro":"RJ",Bras√≠lia:"DF",Salvador:"BA",Fortaleza:"CE","Belo Horizonte":"MG",Manaus:"AM",Curitiba:"PR",Recife:"PE",Goi√¢nia:"GO"}[e]||"SP"}gerarCPF(){const e=Array.from({length:9},()=>Math.floor(Math.random()*10));let t=0;for(let a=0;a<9;a++)t+=e[a]*(10-a);const o=t*10%11%10;t=0;for(let a=0;a<9;a++)t+=e[a]*(11-a);t+=o*2;const i=t*10%11%10;return M.formatDocument([...e,o,i].join(""))}gerarCNPJ(){const e=Array.from({length:8},()=>Math.floor(Math.random()*10));e.push(0,0,0,1);let t=0,o=5;for(let n=0;n<12;n++)t+=e[n]*o--,o<2&&(o=9);const i=t%11<2?0:11-t%11;t=0,o=6;for(let n=0;n<12;n++)t+=e[n]*o--,o<2&&(o=9);t+=i*2;const a=t%11<2?0:11-t%11;return M.formatDocument([...e,i,a].join(""))}gerarTelefone(){const e=Math.floor(Math.random()*89)+11,t=Math.floor(Math.random()*9e8)+1e8;return`(${e}) ${t.toString().slice(0,5)}-${t.toString().slice(5)}`}carregarDadosDemo(){this.locadores=[{id:"loc-1",nome:"Jo√£o da Silva",tipo:"fisica",documento:this.gerarCPF(),email:"joao.silva@example.com",telefone:this.gerarTelefone(),endereco:{logradouro:"Rua das Flores",numero:"123",bairro:"Centro",cidade:"S√£o Paulo",estado:"SP",cep:"01000-000"},status:"ativo",dataRegistro:new Date().toISOString()},{id:"loc-2",nome:"Im√≥veis XYZ Ltda",tipo:"juridica",documento:this.gerarCNPJ(),email:"contato@imoveisxyz.com.br",telefone:this.gerarTelefone(),endereco:{logradouro:"Av. Paulista",numero:"1500",bairro:"Bela Vista",cidade:"S√£o Paulo",estado:"SP",cep:"01310-000"},status:"ativo",dataRegistro:new Date().toISOString()}],this.imoveisOriginais=this.gerarImoveisDemo(100),this.imoveis=[...this.imoveisOriginais]}gerarImoveisDemo(e){const t=["S√£o Paulo","Rio de Janeiro","Bras√≠lia","Salvador","Fortaleza","Belo Horizonte","Manaus","Curitiba","Recife","Goi√¢nia"],o=["Centro","Jardim","Vila Nova","Boa Vista","Industrial","Comercial"],i=["Pr√≥prio","Terceiro"],a=["ativo","prospeccao","mobilizacao","desmobilizacao"],n=[];for(let s=0;s<e;s++){const r=t[s%t.length],d=this.getEstadoByCidade(r),h=o[s%o.length],f=(1e7+s).toString(),E=Math.round(80+Math.random()*920),T=+(1500+Math.random()*8500).toFixed(2),C=String(1+Math.floor(Math.random()*27)).padStart(2,"0"),b=String(1+Math.floor(Math.random()*12)).padStart(2,"0"),I=String(2026+Math.floor(Math.random()*4)),S=`${C}/${b}/${I}`;n.push({id:`imo-${s+1}`,codigo:f,denominacao:`Contrato ${f} - Unidade ${r}`,tipoContrato:"Contrato de Loca√ß√£o - Im√≥veis",utilizacaoPrincipal:i[s%i.length],fimValidade:S,endereco:`Rua Exemplo ${s+1}`,bairro:h,cidade:r,cep:`${String(1e4+s).padStart(5,"0")}-${String(100+s).padStart(3,"0")}`,estado:d,tipo:"comercial",status:a[s%a.length],area:E,valor:T,descricao:"Im√≥vel gerado para demonstra√ß√£o.",fotos:[],caracteristicas:{quartos:0,banheiros:2,garagem:0},locadorId:this.locadores[s%this.locadores.length].id,dataRegistro:new Date().toISOString(),dataAtualizacao:new Date().toISOString(),tipoEdificioCodigo:"01",parceiroNegocios:this.locadores[s%this.locadores.length].nome,tipoIdFiscal:this.locadores[s%this.locadores.length].tipo==="fisica"?"CPF":"CNPJ",numeroIdFiscal:this.locadores[s%this.locadores.length].documento,denominacaoFuncaoPN:"Proponente Credor",inicioRelacao:"01/01/2025",fimRelacao:`31/12/${I}`})}return n}mostrarFormulario(){}adicionarImovel(){}limparFormulario(){}adicionarLocador(){}alterarVisualizacao(e){this.currentView=e}filtrarLocadores(){}limparFiltros(){}atualizarListaLocadores(){}atualizarTabelaImoveis(){const e=document.querySelector(".imoveis-table tbody");if(!e){console.warn("Tabela de im√≥veis n√£o encontrada");return}e.innerHTML="";const t=(this.currentPageImoveis-1)*this.itemsPerPageImoveis,o=t+this.itemsPerPageImoveis;this.imoveis.slice(t,o).forEach(a=>{const n=document.createElement("tr");n.style.cursor="pointer";const s=`badge badge-${a.status}`,r=a.fimValidade||"-";n.innerHTML=`
        <td>${a.codigo}</td>
        <td>${a.denominacao}</td>
        <td>${a.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"}</td>
        <td>${a.utilizacaoPrincipal||"-"}</td>
        <td><span class="${s}">${this.formatarStatus(a.status)}</span></td>
        <td>${r}</td>
        <td>
          <button class="btn-table-action" data-id="${a.id}">
            Ver Detalhes
          </button>
        </td>
      `,n.addEventListener("click",h=>{h.target.classList.contains("btn-table-action")||this.abrirModalDetalhes(a.id)});const d=n.querySelector(".btn-table-action");d&&d.addEventListener("click",h=>{h.stopPropagation(),this.abrirModalDetalhes(a.id)}),e.appendChild(n)}),this.atualizarPaginacaoImoveis()}aplicarMascaraCEP(){const e=document.getElementById("cep");e&&M.applyMask(e,"cep")}fecharModalDetalhes(){const e=document.getElementById("modalDetalhes");e&&e.classList.remove("active")}abrirModalDetalhes(e){const t=this.imoveis.find(i=>i.id===e);if(!t){console.error("Im√≥vel n√£o encontrado:",e);return}this.preencherModalDetalhes(t);const o=document.getElementById("modalDetalhes");if(o){o.classList.add("active");const i=o.querySelector(".modal-close");i&&i.addEventListener("click",()=>this.fecharModalDetalhes()),o.addEventListener("click",a=>{a.target===o&&this.fecharModalDetalhes()})}this.configurarTabs(),this.configurarCollapsibles(),this.configurarSectionIndex(),this.inicializarAbaServicos(t)}preencherModalDetalhes(e){const t=document.querySelector(".modal-header h2");t&&(t.textContent="Detalhes"),this.setElementText("detNumeroContrato",e.codigo||"-"),this.setElementOrigin("detNumeroContrato","SAP"),this.setElementText("detDenominacao",e.denominacao||`${e.endereco}, ${e.bairro}`),this.setElementOrigin("detDenominacao","SAP"),this.setElementText("detTipoContrato",e.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"),this.setElementOrigin("detTipoContrato","SAP"),this.setElementText("detDataInicio",e.dataRegistro?new Date(e.dataRegistro).toLocaleDateString("pt-BR"):"-"),this.setElementOrigin("detDataInicio","SAP"),this.setElementText("detDataFim",e.fimValidade||e.contratoFimValidade||"-"),this.setElementOrigin("detDataFim","SAP"),this.setElementText("detRescisaoEm",e.contratoRescisaoEm||"-"),this.setElementOrigin("detRescisaoEm","SAP");const o=this.calcularStatusContrato(e);this.setElementText("detContratoStatus",o),this.setElementText("detParceiro",e.parceiroNegocios||"-"),this.setElementOrigin("detParceiro","SAP"),this.setElementText("detEnderecoContrato",e.endereco||"-"),this.setElementOrigin("detEnderecoContrato","SAP"),this.setElementText("detNumeroEndereco",e.numeroPN||"-"),this.setElementOrigin("detNumeroEndereco","SAP"),this.setElementText("detCodPostal",e.cep||"-"),this.setElementOrigin("detCodPostal","SAP"),this.setElementText("detLocal",e.estado||"-"),this.setElementOrigin("detLocal","SAP"),this.setElementText("detRua",e.endereco||"-"),this.setElementOrigin("detRua","SAP"),this.setElementText("detBairro",e.bairro||"-"),this.setElementOrigin("detBairro","SAP"),this.setElementText("detCidade",e.cidade||"-"),this.setElementOrigin("detCidade","SAP"),this.setElementText("detEstado",e.estado||"-"),this.setElementOrigin("detEstado","SAP"),this.setElementText("detCep",e.cep||"-"),this.setElementOrigin("detCep","SAP"),this.setElementText("detTipoEdificio",e.tipoEdificioCodigo||"-"),this.setElementOrigin("detTipoEdificio","SAP"),this.setElementText("detArea",e.area?`${e.area} m¬≤`:"-"),this.setElementOrigin("detArea","SAP"),this.setElementText("detValor",e.valor?`R$ ${e.valor.toFixed(2)}`:"-"),this.setElementOrigin("detValor","SAP");const i=[e.endereco,e.bairro].filter(Boolean).join(", ")+(e.cidade||e.estado?`, ${[e.cidade,e.estado].filter(Boolean).join(" - ")}`:"")+(e.cep?`, ${e.cep}`:"");this.setElementText("detEnderecoCompleto",i||"-"),this.setElementOrigin("detEnderecoCompleto","SAP");const a=this.locadores.find(r=>r.status==="ativo");this.setElementText("detParceiroNegocios",a?a.nome:"-"),this.setElementOrigin("detParceiroNegocios","SAP"),this.setElementText("detTipoIdFiscal",a?a.tipo==="fisica"?"CPF":"CNPJ":"-"),this.setElementOrigin("detTipoIdFiscal","SAP"),this.setElementText("detDenominacaoFuncao","Proponente Credor"),this.setElementOrigin("detDenominacaoFuncao","SAP"),this.setElementText("detInicioRelacao",e.inicioRelacao||"-"),this.setElementOrigin("detInicioRelacao","SAP"),this.setElementText("detFimRelacao",e.fimRelacao||"-"),this.setElementOrigin("detFimRelacao","SAP"),this.setElementText("detNomeLocador",a?a.nome:"-"),this.setElementOrigin("detNomeLocador","SAP"),this.setElementText("detLocadorCep",a?.endereco?.cep||"-"),this.setElementOrigin("detLocadorCep","SAP"),this.setElementText("detLocadorEndereco",a?.endereco?.logradouro||"-"),this.setElementOrigin("detLocadorEndereco","SAP"),this.setElementText("detLocadorNumero",a?.endereco?.numero||"-"),this.setElementOrigin("detLocadorNumero","SAP"),this.setElementText("detLocadorBairro",a?.endereco?.bairro||"-"),this.setElementOrigin("detLocadorBairro","SAP"),this.setElementText("detLocadorLocal",a?.endereco?.cidade||"-"),this.setElementOrigin("detLocadorLocal","SAP"),this.setElementText("detLocadorUf",a?.endereco?.estado||"-"),this.setElementOrigin("detLocadorUf","SAP"),this.setElementText("detLocadorEmail",a?.email||"-"),this.setElementOrigin("detLocadorEmail","SAP"),this.setElementText("detLocadorTelefoneFixo",a?.telefone||"-"),this.setElementOrigin("detLocadorTelefoneFixo","SAP"),this.setElementText("detLocadorTelefoneCelular","-"),this.setElementOrigin("detLocadorTelefoneCelular","SAP"),this.setElementText("detLocadorDoc",a?.documento||"-"),this.setElementOrigin("detLocadorDoc","SAP"),this.setElementText("detNumeroProcesso",e.numeroProcesso||"-"),this.setElementOrigin("detNumeroProcesso","SICLG"),this.setElementText("detNumeroInstrumento",e.numeroInstrumento||"-"),this.setElementOrigin("detNumeroInstrumento","SICLG"),this.setElementText("detNumeroLicitacao",e.numeroLicitacao||"-"),this.setElementOrigin("detNumeroLicitacao","SICLG"),this.setElementText("detTipoInstrumento",e.tipoInstrumento||"-"),this.setElementOrigin("detTipoInstrumento","SICLG"),this.setElementText("detSituacao",e.situacao||"-"),this.setElementOrigin("detSituacao","SICLG"),this.setElementText("detIdPncp",e.idContratoPncp||"-"),this.setElementOrigin("detIdPncp","SICLG"),this.setElementText("detDescricaoObjeto",e.descricaoObjeto||"-"),this.setElementOrigin("detDescricaoObjeto","SICLG"),this.setElementText("detEnquadramentoLegal",e.enquadramentoLegal||"-"),this.setElementOrigin("detEnquadramentoLegal","SICLG"),this.setElementText("detDataAssinatura",this.formatDate(e.dataAssinatura)),this.setElementOrigin("detDataAssinatura","SICLG"),this.setElementText("detVigenciaInicial",this.formatDate(e.vigenciaInicial)),this.setElementOrigin("detVigenciaInicial","SICLG"),this.setElementText("detVigenciaFinal",this.formatDate(e.vigenciaFinal)),this.setElementOrigin("detVigenciaFinal","SICLG"),this.setElementText("detFornecedor",e.fornecedor||"-"),this.setElementOrigin("detFornecedor","SICLG"),this.setElementText("detModalidade",e.modalidade||"-"),this.setElementOrigin("detModalidade","SICLG"),this.setElementText("detGestorFormal",e.gestorFormal||"-"),this.setElementOrigin("detGestorFormal","SICLG"),this.setElementText("detGestaoOperacional",e.gestaoOperacional||"-"),this.setElementOrigin("detGestaoOperacional","SICLG"),this.setElementText("detDataPublicacao",this.formatDate(e.dataPublicacao)),this.setElementOrigin("detDataPublicacao","SICLG"),this.setElementText("detEquipeResponsavel",e.equipeResponsavel||"-"),this.setElementOrigin("detEquipeResponsavel","SICLG"),this.setElementText("detValorOriginal",this.formatCurrency(e.valorOriginal)),this.setElementOrigin("detValorOriginal","SICLG"),this.setElementText("detValorGlobalAtual",this.formatCurrency(e.valorGlobalAtualizado)),this.setElementOrigin("detValorGlobalAtual","SICLG"),this.setElementText("detValorVigenciaAtual",this.formatCurrency(e.valorVigenciaAtual)),this.setElementOrigin("detValorVigenciaAtual","SICLG"),this.setElementText("detValorGlobalAditivado",this.formatCurrency(e.valorGlobalAditivado)),this.setElementOrigin("detValorGlobalAditivado","SICLG");const n=e.prorrogavel;this.setElementText("detProrrogavel",typeof n=="boolean"?n?"Sim":"N√£o":n||"-"),this.setElementOrigin("detProrrogavel","SICLG"),this.setElementText("detTipoGarantida",e.tipoGarantida||"-"),this.setElementOrigin("detTipoGarantida","SICLG"),this.setElementText("detRiscoSocial",e.riscoSocial||"-"),this.setElementOrigin("detRiscoSocial","SICLG"),this.setElementText("detRiscoAmbiental",e.riscoAmbiental||"-"),this.setElementOrigin("detRiscoAmbiental","SICLG"),this.setElementText("detRiscoClimatico",e.riscoClimatico||"-"),this.setElementOrigin("detRiscoClimatico","SICLG");const s=e.codigoCondutaAssinado;this.setElementText("detCodigoCondutaAssinado",typeof s=="boolean"?s?"Sim":"N√£o":s||"-"),this.setElementOrigin("detCodigoCondutaAssinado","SICLG"),this.setElementText("detPartesRelacionadas",e.partesRelacionadas||"-"),this.setElementOrigin("detPartesRelacionadas","SICLG"),this.setElementText("detFornecedorTerceiroRelevante",e.fornecedorTerceiroRelevante||"-"),this.setElementOrigin("detFornecedorTerceiroRelevante","SICLG"),this.setElementText("detFornecedorCondenadoCrimeAmbiental",e.fornecedorCondenadoCrimeAmbiental||"-"),this.setElementOrigin("detFornecedorCondenadoCrimeAmbiental","SICLG"),this.setElementText("detFornecedorSujeitoLicenciamentoAmbiental",e.fornecedorSujeitoLicenciamentoAmbiental||"-"),this.setElementOrigin("detFornecedorSujeitoLicenciamentoAmbiental","SICLG")}inicializarAbaServicos(e){const t=document.getElementById("wizCategoria"),o=document.getElementById("wizAcao"),i=document.getElementById("wizAcaoBlock"),a=document.getElementById("wizModalidade"),n=document.getElementById("wizModalidadeBlock"),s=document.getElementById("wizCenario"),r=document.getElementById("wizCenarioBlock"),d=document.getElementById("servicoDescricao"),h=document.getElementById("dadosPreenchidos"),f=document.getElementById("dadosPendentes"),E=document.getElementById("payloadPreview"),T=document.getElementById("payloadBlock"),C=document.getElementById("detalhesDadosBlock"),b=document.getElementById("toggleDetalhesTecnicos"),I=document.getElementById("btnSolicitarServico");if(!t||!o||!a||!d||!h||!f||!I)return;const S=this.carregarServicosHierarquia();let y="ato-formal",v="",P="",x="completo";const A={...e},F=(c,l)=>{const m={...l};for(const u of c.requisitos)switch(u){case"cep":m.cep="";break;case"endereco":m.endereco="";break;case"cidade":m.cidade="";break;case"estado":m.estado="";break;case"fimValidade":m.fimValidade="";break}return m},k=(c,l)=>{const m=document.createElement("button");m.type="button",m.style.display="flex",m.style.flexDirection="column",m.style.alignItems="flex-start",m.style.gap="4px",m.style.padding="6px 8px",m.style.border="1px solid #d0d7de",m.style.borderRadius="8px",m.style.cursor="pointer",m.style.textAlign="left",m.className="card";const u=document.createElement("strong");u.textContent=c;const g=document.createElement("span");return g.textContent="",g.style.color="#555",g.style.fontSize=".85rem",m.appendChild(u),m},O=c=>{const l=document.createElement("button");return l.type="button",l.textContent=c,l.style.padding="4px 8px",l.style.border="1px solid #d0d7de",l.style.borderRadius="999px",l.style.cursor="pointer",l.className="chip",l},L=()=>{const c=S[y]?.[v]?.[P];if(!c){d.textContent="",h.innerHTML="",f.innerHTML="",E&&(E.textContent=""),I.disabled=!0;return}d.textContent=c.descricao;const l=x==="pendencias"?F(c,A):A,m=this.montarResumoCampos(c,l);this.atualizarResumoDados(h,f,m);const u=this.montarPayloadSolicitacao({id:c.id,nome:c.nome},l);if(E&&(E.textContent=JSON.stringify(u,null,2)),I.disabled=!this.validarRequisitos(c,l),b){const g=m.pendentes.length,$=C&&C.style.display!=="none";b.textContent=$?"Ocultar detalhes t√©cnicos":g>0?`Mostrar detalhes t√©cnicos (${g} pend√™ncias)`:"Mostrar detalhes t√©cnicos"}},w=()=>{t.innerHTML="";const c=Object.keys(S).filter(l=>l==="ato-formal");for(const l of c){const m=G(l),u=k(m);u.onclick=()=>{y=l,v="",P="",w(),o&&(o.innerHTML=""),R(),V(),L(),i&&i.style.setProperty("display","grid","important")},y===l&&u.classList.add("selected"),t.appendChild(u)}},R=c=>{o.innerHTML="";const l=Object.keys(S[y]||{}),m="".toLowerCase(),u=m?l.filter(g=>this.capitalize(g.replace(/-/g," ")).toLowerCase().includes(m)):l;for(const g of u){const $=N(y,g),B=k($);B.onclick=()=>{v=g,P="",R(),V(),D(),L()},v===g&&B.classList.add("selected"),o.appendChild(B)}},V=()=>{a.innerHTML="";const c=Object.keys(S[y]?.[v]||{});if(c.length===1&&c[0]==="nao-se-aplica"){P="nao-se-aplica",n&&n.style.setProperty("display","none","important");return}n&&n.style.setProperty("display","grid","important");for(const l of c){const m=q(l),u=O(m);u.onclick=()=>{P=l,L()},P===l&&u.classList.add("selected"),a.appendChild(u)}},D=()=>{if(!s||!r)return;s.innerHTML="",r.style.setProperty("display","grid","important");const c=O("Completo"),l=O("Pend√™ncias");c.onclick=()=>{x="completo",D(),L()},l.onclick=()=>{x="pendencias",D(),L()},x==="completo"&&c.classList.add("selected"),x==="pendencias"&&l.classList.add("selected"),s.appendChild(c),s.appendChild(l)};if(I.addEventListener("click",()=>{const c=S[y]?.[v]?.[P];if(!c)return;const l=x==="pendencias"?F(c,A):A,m=this.montarPayloadSolicitacao({id:c.id,nome:c.nome},l);console.log("üì¶ Solicita√ß√£o (prot√≥tipo):",m),this.showToast('Solicita√ß√£o registrada. Seus dados foram encaminhados ao m√≥dulo "Solicitar servi√ßos". Em breve voc√™ poder√° acompanhar o andamento.')}),w(),R(),D(),i&&i.style.setProperty("display","grid","important"),n&&n.style.setProperty("display","none","important"),L(),b&&T&&C){let c=!1;b.textContent="Mostrar detalhes t√©cnicos",T.style.setProperty("display","none","important"),C.style.setProperty("display","none","important"),b.onclick=()=>{c=!c,T.style.setProperty("display",c?"block":"none","important"),C.style.setProperty("display",c?"grid":"none","important"),b.textContent=c?"Ocultar detalhes t√©cnicos":"Mostrar detalhes t√©cnicos"}}}carregarServicosHierarquia(){const e=(t,o,i,a,n)=>({id:`${t}-${o}-${i}`,nome:`${this.capitalize(t.replace(/-/g," "))} - ${this.capitalize(o.replace(/-/g," "))} - ${this.capitalize(i)}`,descricao:a,requisitos:n});return{"mudanca-endereco":{"nao-se-aplica":{"nao-se-aplica":e("mudanca-endereco","nao-se-aplica","nao-se-aplica","Mudan√ßa de endere√ßo do im√≥vel/contrato.",["cep","endereco","cidade","estado"])}},regularizacao:{"nao-se-aplica":{"nao-se-aplica":e("regularizacao","nao-se-aplica","nao-se-aplica","Regulariza√ß√£o contratual.",["fimValidade"])}},"ato-formal":{prorrogacao:{"nao-se-aplica":e("ato-formal","prorrogacao","nao-se-aplica","Prorroga√ß√£o de contrato.",["fimValidade"])},rescisao:{"nao-se-aplica":e("ato-formal","rescisao","nao-se-aplica","Rescis√£o contratual.",["fimValidade"])},"alteracao-titularidade":{"nao-se-aplica":e("ato-formal","alteracao-titularidade","nao-se-aplica","Altera√ß√£o de titularidade.",["fimValidade"])},"antecipacao-parcela":{"nao-se-aplica":e("ato-formal","antecipacao-parcela","nao-se-aplica","Antecipa√ß√£o de parcela.",["fimValidade"])},"recebimento-imovel":{"nao-se-aplica":e("ato-formal","recebimento-imovel","nao-se-aplica","Recebimento de im√≥vel.",["cep","endereco","cidade","estado"])},"acrescimo-area":{"nao-se-aplica":e("ato-formal","acrescimo-area","nao-se-aplica","Acr√©scimo de √°rea contratada.",["fimValidade"])},"supressao-area":{"nao-se-aplica":e("ato-formal","supressao-area","nao-se-aplica","Supress√£o de √°rea contratada.",["fimValidade"])},"revisao-aluguel":{"nao-se-aplica":e("ato-formal","revisao-aluguel","nao-se-aplica","Revis√£o de aluguel.",["fimValidade"])},"reajuste-aluguel":{"nao-se-aplica":e("ato-formal","reajuste-aluguel","nao-se-aplica","Reajuste de aluguel.",["fimValidade"])},apostilamento:{"nao-se-aplica":e("ato-formal","apostilamento","nao-se-aplica","Apostilamento contratual.",["fimValidade"])},"acao-renovatoria":{"nao-se-aplica":e("ato-formal","acao-renovatoria","nao-se-aplica","A√ß√£o renovat√≥ria.",["fimValidade"])}}}}popularServicosSelect(e,t){e.innerHTML="";for(const o of t){const i=document.createElement("option");i.value=o.id,i.textContent=o.nome,e.appendChild(i)}}filtrarServicos(e,t,o){const i=o.toLowerCase(),a=t.filter(n=>n.nome.toLowerCase().includes(i));this.popularServicosSelect(e,a.length?a:t)}validarRequisitos(e,t){const o=i=>{switch(i){case"cep":return!!t.cep;case"endereco":return!!t.endereco;case"cidade":return!!t.cidade;case"estado":return!!t.estado;case"fimValidade":return!!t.fimValidade;default:return!0}};return e.requisitos.every(o)}montarResumoCampos(e,t){const o=[{key:"codigo",label:"Contrato",value:t.codigo},{key:"denominacao",label:"Denomina√ß√£o",value:t.denominacao},{key:"parceiroNegocios",label:"Parceiro",value:t.parceiroNegocios},{key:"cep",label:"CEP",value:t.cep},{key:"endereco",label:"Endere√ßo",value:t.endereco},{key:"bairro",label:"Bairro",value:t.bairro},{key:"cidade",label:"Cidade",value:t.cidade},{key:"estado",label:"UF",value:t.estado},{key:"fimValidade",label:"Fim da validade",value:t.fimValidade}],i=[],a=[];for(const s of o)s.value?i.push({label:s.label,value:s.value}):a.push({label:s.label});const n={cep:"CEP",endereco:"Endere√ßo",cidade:"Cidade",estado:"UF",fimValidade:"Fim da validade"};for(const s of e.requisitos)t[s]||a.push({label:n[s]||s});return{preenchidos:i,pendentes:a}}atualizarResumoDados(e,t,o){e.innerHTML="",t.innerHTML="";const i=document.getElementById("dadosPendentesCol"),a=document.getElementById("dadosPreenchidosCol");for(const n of o.preenchidos){const s=document.createElement("li");s.textContent=`${n.label}: ${n.value}`,s.style.color="#2e7d32",e.appendChild(s)}for(const n of o.pendentes){const s=document.createElement("li");s.textContent=`${n.label}: ‚Äî`,s.style.color="#b26a00",t.appendChild(s)}i&&(i.style.display=o.pendentes.length?"block":"none"),a&&(a.style.display=o.preenchidos.length?"block":"none")}montarPayloadSolicitacao(e,t){return{servico:{id:e.id,nome:e.nome},imovel:{id:t.id,codigo:t.codigo,endereco:t.endereco,cep:t.cep,cidade:t.cidade,estado:t.estado,fimValidade:t.fimValidade},origem:this.usandoDadosSAP?"SAP":"Demo",criadoEm:new Date().toISOString()}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}setElementText(e,t){const o=document.getElementById(e);o&&(o.textContent=t)}setElementOrigin(e,t){const o=document.getElementById(e);o&&(t?o.setAttribute("data-origin",t):o.removeAttribute("data-origin"))}formatDate(e){if(!e)return"-";if(/^\d{2}\/\d{2}\/\d{4}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?e||"-":t.toLocaleDateString("pt-BR")}formatCurrency(e){if(e==null||e==="")return"-";const t=typeof e=="string"?parseFloat(e.replace(/[^0-9.,-]/g,"").replace(",",".")):e;if(isNaN(t))return String(e);try{return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t)}catch{return`R$ ${t.toFixed(2)}`}}calcularStatusContrato(e){const t=new Date,o=this.parseDate(e.contratoInicio||e.dataRegistro),i=this.parseDate(e.contratoFimValidade||e.fimValidade),a=this.parseDate(e.contratoRescisaoEm);return a&&a<=t?"Rescindido":i&&i<t?"Vencido":o&&o>t?"Aguardando in√≠cio":o&&(!i||i>=t)?"Vigente":"Indefinido"}parseDate(e){if(!e)return null;if(/^\d{2}\/\d{2}\/\d{4}$/.test(e)){const[o,i,a]=e.split("/").map(Number);return new Date(a,i-1,o)}const t=new Date(e);return isNaN(t.getTime())?null:t}configurarCollapsibles(){const e=Array.from(document.querySelectorAll(".info-section.collapsible"));for(const t of e){const o=t.querySelector(".collapse-toggle");if(!o)continue;const i=o.getAttribute("aria-expanded")==="true";t.classList.toggle("collapsed",!i),o.textContent=i?"Recolher":"Expandir",o.addEventListener("click",()=>{const a=o.getAttribute("aria-expanded")==="true";o.setAttribute("aria-expanded",(!a).toString()),o.textContent=a?"Expandir":"Recolher",t.classList.toggle("collapsed",a)})}}configurarSectionIndex(){const e=Array.from(document.querySelectorAll(".section-index"));if(e.length)for(const t of e){const o=Array.from(t.querySelectorAll("a"));for(const i of o)i.addEventListener("click",a=>{a.preventDefault();const n=i.getAttribute("href")||"",s=n.startsWith("#")?n.slice(1):n,r=document.getElementById(s);if(r){if(r.classList.contains("collapsible")&&r.classList.contains("collapsed")){const d=r.querySelector(".collapse-toggle");d&&(d.setAttribute("aria-expanded","true"),d.textContent="Recolher",r.classList.remove("collapsed"))}try{r.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}catch{const d=document.querySelector(".modal");if(d){const h=r.getBoundingClientRect().top-d.getBoundingClientRect().top+d.scrollTop-60;d.scrollTo({top:h,behavior:"smooth"})}}}})}}setInputValue(e,t){const o=document.getElementById(e);o&&(o.value=t||"")}addEventListenerSafe(e,t,o){const i=document.getElementById(e);i&&i.addEventListener(t,o)}showToast(e){const t=document.getElementById("toastContainer");if(!t){alert(e);return}const o=document.createElement("div");o.textContent=e,o.style.background="#2e7d32",o.style.color="#fff",o.style.padding="10px 14px",o.style.borderRadius="6px",o.style.boxShadow="0 2px 8px rgba(0,0,0,.15)",o.style.fontSize=".95rem",o.style.maxWidth="360px",t.appendChild(o),setTimeout(()=>{o.style.transition="opacity .3s",o.style.opacity="0",setTimeout(()=>o.remove(),300)},2500)}validarData(e,t=!1){if(!e)return t;const o=e.match(/^([0-3]\d)\/(0\d|1[0-2])\/(\d{4})$/);if(!o)return!1;const i=parseInt(o[1],10),a=parseInt(o[2],10),n=parseInt(o[3],10),s=new Date(n,a-1,i);return s.getFullYear()===n&&s.getMonth()===a-1&&s.getDate()===i}mostrarErro(e,t,o){const i=document.getElementById(e);i&&(i.style.display=t?"block":"none",o&&(i.textContent=o))}formatarStatus(e){return{ativo:"Ativo",prospeccao:"Prospec√ß√£o",mobilizacao:"Mobiliza√ß√£o",desmobilizacao:"Desmobiliza√ß√£o",disponivel:"Dispon√≠vel",ocupado:"Ocupado",manutencao:"Manuten√ß√£o",vendido:"Vendido"}[e]||e}configurarTabs(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");e.forEach((o,i)=>{o.addEventListener("click",()=>{e.forEach(a=>a.classList.remove("active")),t.forEach(a=>a.classList.remove("active")),o.classList.add("active"),t[i]&&t[i].classList.add("active")})})}atualizarPaginacaoImoveis(){const e=(this.currentPageImoveis-1)*this.itemsPerPageImoveis+1,t=Math.min(this.currentPageImoveis*this.itemsPerPageImoveis,this.imoveis.length),o=this.imoveis.length;this.setElementText("paginationStart",e.toString()),this.setElementText("paginationEnd",t.toString()),this.setElementText("paginationTotal",o.toString()),this.gerarBotoesPaginacao()}gerarBotoesPaginacao(){const e=document.getElementById("paginationControls");if(!e)return;e.innerHTML="";const t=Math.ceil(this.imoveis.length/this.itemsPerPageImoveis);if(t<=1)return;const o=document.createElement("button");o.innerHTML="‚Üê Anterior",o.disabled=this.currentPageImoveis===1,o.addEventListener("click",()=>{this.currentPageImoveis>1&&(this.currentPageImoveis--,this.atualizarTabelaImoveis())}),e.appendChild(o);const i=5;let a=Math.max(1,this.currentPageImoveis-Math.floor(i/2)),n=Math.min(t,a+i-1);if(n-a<i-1&&(a=Math.max(1,n-i+1)),a>1){const r=document.createElement("button");if(r.textContent="1",r.addEventListener("click",()=>{this.currentPageImoveis=1,this.atualizarTabelaImoveis()}),e.appendChild(r),a>2){const d=document.createElement("button");d.textContent="...",d.disabled=!0,e.appendChild(d)}}for(let r=a;r<=n;r++){const d=document.createElement("button");d.textContent=r.toString(),d.classList.toggle("active",r===this.currentPageImoveis);const h=r;d.addEventListener("click",()=>{this.currentPageImoveis=h,this.atualizarTabelaImoveis()}),e.appendChild(d)}if(n<t){if(n<t-1){const d=document.createElement("button");d.textContent="...",d.disabled=!0,e.appendChild(d)}const r=document.createElement("button");r.textContent=t.toString(),r.addEventListener("click",()=>{this.currentPageImoveis=t,this.atualizarTabelaImoveis()}),e.appendChild(r)}const s=document.createElement("button");s.innerHTML="Pr√≥ximo ‚Üí",s.disabled=this.currentPageImoveis===t,s.addEventListener("click",()=>{this.currentPageImoveis<t&&(this.currentPageImoveis++,this.atualizarTabelaImoveis())}),e.appendChild(s)}configurarItemsPorPagina(){const e=document.getElementById("imoveisPorPaginaSelect");e&&e.addEventListener("change",()=>{const t=parseInt(e.value,10);!isNaN(t)&&t>0&&(this.itemsPerPageImoveis=t,this.currentPageImoveis=1,this.atualizarTabelaImoveis())})}configurarFiltrosImoveisImediato(){this.addEventListenerSafe("pesquisarImoveis","click",()=>{this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("limparFiltrosImoveis","click",()=>{this.limparFiltrosImoveis()}),this.addEventListenerSafe("filtroContrato","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("filtroDenominacao","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()})}aplicarFiltrosImoveis(){console.log("üîç Aplicando filtros de im√≥veis...");const e=document.getElementById("filtroContrato")?.value.toLowerCase()||"",t=document.getElementById("filtroUtilizacao")?.value||"",o=document.getElementById("filtroStatus")?.value||"",i=document.getElementById("filtroDenominacao")?.value.toLowerCase()||"",a=document.getElementById("filtroDataInicio")?.value||"",n=document.getElementById("filtroDataFim")?.value||"";this.imoveis=this.imoveisOriginais.filter(s=>{if(e&&!s.codigo.toLowerCase().includes(e)||t&&s.utilizacaoPrincipal!==t)return!1;if(o){const r={Ativo:"ativo","Em Prospec√ß√£o":"prospeccao","Em Mobiliza√ß√£o":"mobilizacao","Em Desmobiliza√ß√£o":"desmobilizacao",Desativado:"desativado"};if(s.status!==r[o])return!1}if(i&&!s.denominacao.toLowerCase().includes(i))return!1;if(a||n){if(s.fimValidade){const[r,d,h]=s.fimValidade.split("/"),f=new Date(parseInt(h),parseInt(d)-1,parseInt(r));if(a){const E=new Date(a);if(f<E)return!1}if(n){const E=new Date(n);if(f>E)return!1}}else if(a||n)return!1}return!0}),this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log(`‚úÖ Filtros aplicados: ${this.imoveis.length} im√≥veis encontrados`)}limparFiltrosImoveis(){const e=document.getElementById("filtroContrato"),t=document.getElementById("filtroUtilizacao"),o=document.getElementById("filtroStatus"),i=document.getElementById("filtroDenominacao"),a=document.getElementById("filtroDataInicio"),n=document.getElementById("filtroDataFim");e&&(e.value=""),t&&(t.value=""),o&&(o.value=""),i&&(i.value=""),a&&(a.value=""),n&&(n.value=""),this.imoveis=[...this.imoveisOriginais],this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log("üßπ Filtros limpos")}atualizarDashboard(){const e=this.calcularEstatisticas();this.setElementText("totalImoveis",e.totalImoveis.toString()),this.setElementText("imoveisAtivos",e.imoveisAtivos.toString()),this.setElementText("imoveisProspeccao",e.imoveisProspeccao.toString()),this.setElementText("imoveisMobilizacao",e.imoveisMobilizacao.toString()),this.setElementText("imoveisDesmobilizacao",e.imoveisDesmobilizacao.toString())}calcularEstatisticas(){return{totalImoveis:this.imoveis.length,imoveisAtivos:this.imoveis.filter(e=>e.status==="ativo").length,imoveisProspeccao:this.imoveis.filter(e=>e.status==="prospeccao").length,imoveisMobilizacao:this.imoveis.filter(e=>e.status==="mobilizacao").length,imoveisDesmobilizacao:this.imoveis.filter(e=>e.status==="desmobilizacao").length,totalLocadores:this.locadores.length}}}function J(){const p="https://osvaldojeronymo.github.io/silic-portal-imoveis/",e=document.referrer,t=window.location.search.includes("from=portal");(e.includes("silic-portal")||t)&&window.history.length>1?window.history.back():window.location.href=p}export{U as SistemaSILIC,J as voltarAoPortal};
