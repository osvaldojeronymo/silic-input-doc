import"./main-PateXggy.js";import"./modulepreload-polyfill-B5Qt9EMX.js";class x{static generateId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}static formatDocument(e){const t=e.replace(/\D/g,"");return t.length===11?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):t.length===14?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):e}static formatCEP(e){return e.replace(/\D/g,"").replace(/(\d{5})(\d{3})/,"$1-$2")}static formatMoney(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)}static formatCurrency(e){return this.formatMoney(e)}static formatDate(e){return(typeof e=="string"?new Date(e):e).toLocaleDateString("pt-BR")}static applyMask(e,t){e.addEventListener("input",a=>{const i=a.target;let o=i.value.replace(/\D/g,"");switch(t){case"cep":o.length<=8&&(o=o.replace(/(\d{5})(\d)/,"$1-$2"));break;case"phone":o.length<=11&&(o=o.replace(/(\d{2})(\d)/,"($1) $2"),o=o.replace(/(\d{4,5})(\d{4})$/,"$1-$2"));break;case"cpf":o.length<=11&&(o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d{2})$/,"$1-$2"));break;case"cnpj":o.length<=14&&(o=o.replace(/(\d{2})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1.$2"),o=o.replace(/(\d{3})(\d)/,"$1/$2"),o=o.replace(/(\d{4})(\d{2})$/,"$1-$2"));break}i.value=o})}static debounce(e,t){let a;return(...i)=>{clearTimeout(a),a=setTimeout(()=>e(...i),t)}}static escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}static validators={cpf:e=>{const t=e.replace(/\D/g,"");if(t.length!==11||/^(\d)\1+$/.test(t))return!1;let a=0;for(let o=0;o<9;o++)a+=parseInt(t[o])*(10-o);let i=a*10%11;if((i===10||i===11)&&(i=0),i!==parseInt(t[9]))return!1;a=0;for(let o=0;o<10;o++)a+=parseInt(t[o])*(11-o);return i=a*10%11,(i===10||i===11)&&(i=0),i===parseInt(t[10])},cnpj:e=>{const t=e.replace(/\D/g,"");if(t.length!==14||/^(\d)\1+$/.test(t))return!1;let a=0,i=5;for(let s=0;s<12;s++)a+=parseInt(t[s])*i--,i<2&&(i=9);let o=a%11<2?0:11-a%11;if(o!==parseInt(t[12]))return!1;a=0,i=6;for(let s=0;s<13;s++)a+=parseInt(t[s])*i--,i<2&&(i=9);return o=a%11<2?0:11-a%11,o===parseInt(t[13])},email:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),cep:e=>e.replace(/\D/g,"").length===8}}function M(u){switch(u){case"mudanca-endereco":return"Mudan√ßa de Endere√ßo";case"regularizacao":return"Regulariza√ß√£o";case"ato-formal":return"Ato Formal";default:return T(u)}}function B(u,e){if(e==="nao-se-aplica")return"N√£o se aplica";if(u==="ato-formal")switch(e){case"prorrogacao":return"Prorroga√ß√£o";case"rescisao":return"Rescis√£o";case"alteracao-titularidade":return"Altera√ß√£o de titularidade";case"antecipacao-parcela":return"Antecipa√ß√£o de parcela";case"recebimento-imovel":return"Recebimento de im√≥vel";case"acrescimo-area":return"Acr√©scimo de √°rea";case"supressao-area":return"Supress√£o de √°rea";case"revisao-aluguel":return"Revis√£o de aluguel";case"reajuste-aluguel":return"Reajuste de aluguel";case"apostilamento":return"Apostilamento";case"acao-renovatoria":return"A√ß√£o renovat√≥ria"}return T(e)}function w(u){switch(u){case"nao-se-aplica":return"N√£o se aplica";case"locacao":return"Loca√ß√£o";case"cessao":return"Cess√£o";case"comodato":return"Comodato";default:return T(u)}}function T(u){if(!u)return u;const e=u.replace(/-/g," ");return e.charAt(0).toUpperCase()+e.slice(1)}class k{imoveis=[];imoveisOriginais=[];locadores=[];usandoDadosSAP=!1;currentPage=1;itemsPerPage=10;currentPageImoveis=1;itemsPerPageImoveis=10;currentView="table";constructor(){this.usandoDadosSAP=!1,this.carregarDadosDemo(),this.configurarFiltrosImoveisImediato(),this.configurarItemsPorPagina(),this.atualizarTabelaImoveis(),this.atualizarDashboard()}getEstadoByCidade(e){return{"S√£o Paulo":"SP","Rio de Janeiro":"RJ",Bras√≠lia:"DF",Salvador:"BA",Fortaleza:"CE","Belo Horizonte":"MG",Manaus:"AM",Curitiba:"PR",Recife:"PE",Goi√¢nia:"GO"}[e]||"SP"}gerarCPF(){const e=Array.from({length:9},()=>Math.floor(Math.random()*10));let t=0;for(let o=0;o<9;o++)t+=e[o]*(10-o);const a=t*10%11%10;t=0;for(let o=0;o<9;o++)t+=e[o]*(11-o);t+=a*2;const i=t*10%11%10;return x.formatDocument([...e,a,i].join(""))}gerarCNPJ(){const e=Array.from({length:8},()=>Math.floor(Math.random()*10));e.push(0,0,0,1);let t=0,a=5;for(let s=0;s<12;s++)t+=e[s]*a--,a<2&&(a=9);const i=t%11<2?0:11-t%11;t=0,a=6;for(let s=0;s<12;s++)t+=e[s]*a--,a<2&&(a=9);t+=i*2;const o=t%11<2?0:11-t%11;return x.formatDocument([...e,i,o].join(""))}gerarTelefone(){const e=Math.floor(Math.random()*89)+11,t=Math.floor(Math.random()*9e8)+1e8;return`(${e}) ${t.toString().slice(0,5)}-${t.toString().slice(5)}`}carregarDadosDemo(){this.locadores=[{id:"loc-1",nome:"Jo√£o da Silva",tipo:"fisica",documento:this.gerarCPF(),email:"joao.silva@example.com",telefone:this.gerarTelefone(),endereco:{logradouro:"Rua das Flores",numero:"123",bairro:"Centro",cidade:"S√£o Paulo",estado:"SP",cep:"01000-000"},status:"ativo",dataRegistro:new Date().toISOString()},{id:"loc-2",nome:"Im√≥veis XYZ Ltda",tipo:"juridica",documento:this.gerarCNPJ(),email:"contato@imoveisxyz.com.br",telefone:this.gerarTelefone(),endereco:{logradouro:"Av. Paulista",numero:"1500",bairro:"Bela Vista",cidade:"S√£o Paulo",estado:"SP",cep:"01310-000"},status:"ativo",dataRegistro:new Date().toISOString()}],this.imoveisOriginais=this.gerarImoveisDemo(100),this.imoveis=[...this.imoveisOriginais]}gerarImoveisDemo(e){const t=["S√£o Paulo","Rio de Janeiro","Bras√≠lia","Salvador","Fortaleza","Belo Horizonte","Manaus","Curitiba","Recife","Goi√¢nia"],a=["Centro","Jardim","Vila Nova","Boa Vista","Industrial","Comercial"],i=["Pr√≥prio","Terceiro"],o=["ativo","prospeccao","mobilizacao","desmobilizacao"],s=[];for(let r=0;r<e;r++){const n=t[r%t.length],l=this.getEstadoByCidade(n),p=a[r%a.length],g=(1e7+r).toString(),v=Math.round(80+Math.random()*920),f=+(1500+Math.random()*8500).toFixed(2),b=String(1+Math.floor(Math.random()*27)).padStart(2,"0"),E=String(1+Math.floor(Math.random()*12)).padStart(2,"0"),y=String(2026+Math.floor(Math.random()*4)),C=`${b}/${E}/${y}`;s.push({id:`imo-${r+1}`,codigo:g,denominacao:`Contrato ${g} - Unidade ${n}`,tipoContrato:"Contrato de Loca√ß√£o - Im√≥veis",utilizacaoPrincipal:i[r%i.length],fimValidade:C,endereco:`Rua Exemplo ${r+1}`,bairro:p,cidade:n,cep:`${String(1e4+r).padStart(5,"0")}-${String(100+r).padStart(3,"0")}`,estado:l,tipo:"comercial",status:o[r%o.length],area:v,valor:f,descricao:"Im√≥vel gerado para demonstra√ß√£o.",fotos:[],caracteristicas:{quartos:0,banheiros:2,garagem:0},locadorId:this.locadores[r%this.locadores.length].id,dataRegistro:new Date().toISOString(),dataAtualizacao:new Date().toISOString(),tipoEdificioCodigo:"01",parceiroNegocios:this.locadores[r%this.locadores.length].nome,tipoIdFiscal:this.locadores[r%this.locadores.length].tipo==="fisica"?"CPF":"CNPJ",numeroIdFiscal:this.locadores[r%this.locadores.length].documento,denominacaoFuncaoPN:"Proponente Credor",inicioRelacao:"01/01/2025",fimRelacao:`31/12/${y}`})}return s}mostrarFormulario(){}adicionarImovel(){}limparFormulario(){}adicionarLocador(){}alterarVisualizacao(e){this.currentView=e}filtrarLocadores(){}limparFiltros(){}atualizarListaLocadores(){}atualizarTabelaImoveis(){const e=document.querySelector(".imoveis-table tbody");if(!e){console.warn("Tabela de im√≥veis n√£o encontrada");return}e.innerHTML="";const t=(this.currentPageImoveis-1)*this.itemsPerPageImoveis,a=t+this.itemsPerPageImoveis;this.imoveis.slice(t,a).forEach(o=>{const s=document.createElement("tr");s.style.cursor="pointer";const r=`badge badge-${o.status}`,n=o.fimValidade||"-";s.innerHTML=`
        <td>${o.codigo}</td>
        <td>${o.denominacao}</td>
        <td>${o.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"}</td>
        <td>${o.utilizacaoPrincipal||"-"}</td>
        <td><span class="${r}">${this.formatarStatus(o.status)}</span></td>
        <td>${n}</td>
        <td>
          <button class="btn-table-action" data-id="${o.id}">
            Ver Detalhes
          </button>
        </td>
      `,s.addEventListener("click",p=>{p.target.classList.contains("btn-table-action")||this.abrirModalDetalhes(o.id)});const l=s.querySelector(".btn-table-action");l&&l.addEventListener("click",p=>{p.stopPropagation(),this.abrirModalDetalhes(o.id)}),e.appendChild(s)}),this.atualizarPaginacaoImoveis()}aplicarMascaraCEP(){const e=document.getElementById("cep");e&&x.applyMask(e,"cep")}fecharModalDetalhes(){const e=document.getElementById("modalDetalhes");e&&e.classList.remove("active")}abrirModalDetalhes(e){const t=this.imoveis.find(i=>i.id===e);if(!t){console.error("Im√≥vel n√£o encontrado:",e);return}this.preencherModalDetalhes(t);const a=document.getElementById("modalDetalhes");if(a){a.classList.add("active");const i=a.querySelector(".modal-close");i&&i.addEventListener("click",()=>this.fecharModalDetalhes()),a.addEventListener("click",o=>{o.target===a&&this.fecharModalDetalhes()})}this.configurarTabs(),this.inicializarAbaServicos(t)}preencherModalDetalhes(e){const t=document.querySelector(".modal-header h2");t&&(t.textContent="Detalhes"),this.setElementText("detNumeroContrato",e.codigo||"-"),this.setElementText("detDenominacao",e.denominacao||`${e.endereco}, ${e.bairro}`),this.setElementText("detTipoContrato",e.tipoContrato||"Contrato de Loca√ß√£o - Im√≥veis"),this.setElementText("detDataInicio",e.dataRegistro?new Date(e.dataRegistro).toLocaleDateString("pt-BR"):"-"),this.setElementText("detDataFim",e.fimValidade||"-"),this.setElementText("detParceiro",e.parceiroNegocios||"-"),this.setElementText("detEnderecoContrato",e.endereco||"-"),this.setElementText("detNumeroEndereco",e.numeroPN||"-"),this.setElementText("detCodPostal",e.cep||"-"),this.setElementText("detLocal",e.estado||"-"),this.setElementText("detRua",e.endereco||"-"),this.setElementText("detBairro",e.bairro||"-"),this.setElementText("detCidade",e.cidade||"-"),this.setElementText("detEstado",e.estado||"-"),this.setElementText("detCep",e.cep||"-"),this.setElementText("detTipoEdificio",e.tipoEdificioCodigo||"-"),this.setElementText("detArea",e.area?`${e.area} m¬≤`:"-"),this.setElementText("detValor",e.valor?`R$ ${e.valor.toFixed(2)}`:"-");const a=this.locadores.find(i=>i.status==="ativo");this.setElementText("detParceiroNegocios",a?a.nome:"-"),this.setElementText("detTipoIdFiscal",a?a.tipo==="fisica"?"CPF":"CNPJ":"-"),this.setElementText("detDenominacaoFuncao","Proponente Credor"),this.setElementText("detInicioRelacao",e.inicioRelacao||"-"),this.setElementText("detFimRelacao",e.fimRelacao||"-"),this.setElementText("detNomeLocador",a?a.nome:"-"),this.setElementText("detLocadorCep",a?.endereco?.cep||"-"),this.setElementText("detLocadorEndereco",a?.endereco?.logradouro||"-"),this.setElementText("detLocadorNumero",a?.endereco?.numero||"-"),this.setElementText("detLocadorBairro",a?.endereco?.bairro||"-"),this.setElementText("detLocadorLocal",a?.endereco?.cidade||"-"),this.setElementText("detLocadorUf",a?.endereco?.estado||"-"),this.setElementText("detLocadorEmail",a?.email||"-"),this.setElementText("detLocadorTelefoneFixo",a?.telefone||"-"),this.setElementText("detLocadorTelefoneCelular","-")}inicializarAbaServicos(e){const t=document.getElementById("wizCategoria"),a=document.getElementById("wizAcao"),i=document.getElementById("wizAcaoBlock"),o=document.getElementById("wizModalidade"),s=document.getElementById("wizModalidadeBlock"),r=document.getElementById("servicoDescricao"),n=document.getElementById("dadosPreenchidos"),l=document.getElementById("dadosPendentes"),p=document.getElementById("payloadPreview"),g=document.getElementById("btnSolicitarServico");if(!t||!a||!o||!r||!n||!l||!g)return;const v=this.carregarServicosHierarquia();let f="",b="",E="";const y=(m,c)=>{const d=document.createElement("button");d.type="button",d.style.display="flex",d.style.flexDirection="column",d.style.alignItems="flex-start",d.style.gap="4px",d.style.padding="6px 8px",d.style.border="1px solid #d0d7de",d.style.borderRadius="8px",d.style.cursor="pointer",d.style.textAlign="left",d.className="card";const h=document.createElement("strong");h.textContent=m;const I=document.createElement("span");return I.textContent="",I.style.color="#555",I.style.fontSize=".85rem",d.appendChild(h),d},C=m=>{const c=document.createElement("button");return c.type="button",c.textContent=m,c.style.padding="4px 8px",c.style.border="1px solid #d0d7de",c.style.borderRadius="999px",c.style.cursor="pointer",c.className="chip",c},P=()=>{const m=v[f]?.[b]?.[E];if(!m){r.textContent="",n.innerHTML="",l.innerHTML="",p&&(p.textContent=""),g.disabled=!0;return}r.textContent=m.descricao;const c=this.montarResumoCampos(m,e);this.atualizarResumoDados(n,l,c);const d=this.montarPayloadSolicitacao({id:m.id,nome:m.nome},e);p&&(p.textContent=JSON.stringify(d,null,2)),g.disabled=!this.validarRequisitos(m,e)},D=()=>{t.innerHTML="";const m=Object.keys(v);for(const c of m){const d=M(c),h=y(d);h.onclick=()=>{f=c,b="",E="",D(),f==="ato-formal"?(a&&(a.innerHTML=""),$()):(b="nao-se-aplica",a&&(a.innerHTML="")),L(),P(),i&&(i.style.display=f==="ato-formal"?"grid":"none")},f===c&&h.classList.add("selected"),t.appendChild(h)}},$=m=>{a.innerHTML="";const c=Object.keys(v[f]||{}),d="".toLowerCase(),h=d?c.filter(I=>this.capitalize(I.replace(/-/g," ")).toLowerCase().includes(d)):c;for(const I of h){const z=B(f,I),S=y(z);S.onclick=()=>{b=I,E="",L(),P()},b===I&&S.classList.add("selected"),a.appendChild(S)}},L=()=>{o.innerHTML="";const m=Object.keys(v[f]?.[b]||{});if(m.length===1&&m[0]==="nao-se-aplica"){E="nao-se-aplica",s&&(s.style.display="none");return}s&&(s.style.display="grid");for(const c of m){const d=w(c),h=C(d);h.onclick=()=>{E=c,P()},E===c&&h.classList.add("selected"),o.appendChild(h)}};g.addEventListener("click",()=>{const m=v[f]?.[b]?.[E];if(!m)return;const c=this.montarPayloadSolicitacao({id:m.id,nome:m.nome},e);console.log("üì¶ Solicita√ß√£o (prot√≥tipo):",c),this.showToast('Solicita√ß√£o registrada. Seus dados foram encaminhados ao m√≥dulo "Solicitar servi√ßos". Em breve voc√™ poder√° acompanhar o andamento.')}),D(),i&&(i.style.display=f==="ato-formal"?"grid":"none"),s&&(s.style.display="none"),P()}carregarServicosHierarquia(){const e=(t,a,i,o,s)=>({id:`${t}-${a}-${i}`,nome:`${this.capitalize(t.replace(/-/g," "))} - ${this.capitalize(a.replace(/-/g," "))} - ${this.capitalize(i)}`,descricao:o,requisitos:s});return{"mudanca-endereco":{"nao-se-aplica":{"nao-se-aplica":e("mudanca-endereco","nao-se-aplica","nao-se-aplica","Mudan√ßa de endere√ßo do im√≥vel/contrato.",["cep","endereco","cidade","estado"])}},regularizacao:{"nao-se-aplica":{"nao-se-aplica":e("regularizacao","nao-se-aplica","nao-se-aplica","Regulariza√ß√£o contratual.",["fimValidade"])}},"ato-formal":{prorrogacao:{"nao-se-aplica":e("ato-formal","prorrogacao","nao-se-aplica","Prorroga√ß√£o de contrato.",["fimValidade"])},rescisao:{"nao-se-aplica":e("ato-formal","rescisao","nao-se-aplica","Rescis√£o contratual.",["fimValidade"])},"alteracao-titularidade":{"nao-se-aplica":e("ato-formal","alteracao-titularidade","nao-se-aplica","Altera√ß√£o de titularidade.",["fimValidade"])},"antecipacao-parcela":{"nao-se-aplica":e("ato-formal","antecipacao-parcela","nao-se-aplica","Antecipa√ß√£o de parcela.",["fimValidade"])},"recebimento-imovel":{"nao-se-aplica":e("ato-formal","recebimento-imovel","nao-se-aplica","Recebimento de im√≥vel.",["cep","endereco","cidade","estado"])},"acrescimo-area":{"nao-se-aplica":e("ato-formal","acrescimo-area","nao-se-aplica","Acr√©scimo de √°rea contratada.",["fimValidade"])},"supressao-area":{"nao-se-aplica":e("ato-formal","supressao-area","nao-se-aplica","Supress√£o de √°rea contratada.",["fimValidade"])},"revisao-aluguel":{"nao-se-aplica":e("ato-formal","revisao-aluguel","nao-se-aplica","Revis√£o de aluguel.",["fimValidade"])},"reajuste-aluguel":{"nao-se-aplica":e("ato-formal","reajuste-aluguel","nao-se-aplica","Reajuste de aluguel.",["fimValidade"])},apostilamento:{"nao-se-aplica":e("ato-formal","apostilamento","nao-se-aplica","Apostilamento contratual.",["fimValidade"])},"acao-renovatoria":{"nao-se-aplica":e("ato-formal","acao-renovatoria","nao-se-aplica","A√ß√£o renovat√≥ria.",["fimValidade"])}}}}popularServicosSelect(e,t){e.innerHTML="";for(const a of t){const i=document.createElement("option");i.value=a.id,i.textContent=a.nome,e.appendChild(i)}}filtrarServicos(e,t,a){const i=a.toLowerCase(),o=t.filter(s=>s.nome.toLowerCase().includes(i));this.popularServicosSelect(e,o.length?o:t)}validarRequisitos(e,t){const a=i=>{switch(i){case"cep":return!!t.cep;case"endereco":return!!t.endereco;case"cidade":return!!t.cidade;case"estado":return!!t.estado;case"fimValidade":return!!t.fimValidade;default:return!0}};return e.requisitos.every(a)}montarResumoCampos(e,t){const a=[{key:"codigo",label:"Contrato",value:t.codigo},{key:"denominacao",label:"Denomina√ß√£o",value:t.denominacao},{key:"parceiroNegocios",label:"Parceiro",value:t.parceiroNegocios},{key:"cep",label:"CEP",value:t.cep},{key:"endereco",label:"Endere√ßo",value:t.endereco},{key:"bairro",label:"Bairro",value:t.bairro},{key:"cidade",label:"Cidade",value:t.cidade},{key:"estado",label:"UF",value:t.estado},{key:"fimValidade",label:"Fim da validade",value:t.fimValidade}],i=[],o=[];for(const r of a)r.value?i.push({label:r.label,value:r.value}):o.push({label:r.label});const s={cep:"CEP",endereco:"Endere√ßo",cidade:"Cidade",estado:"UF",fimValidade:"Fim da validade"};for(const r of e.requisitos)t[r]||o.push({label:s[r]||r});return{preenchidos:i,pendentes:o}}atualizarResumoDados(e,t,a){e.innerHTML="",t.innerHTML="";for(const i of a.preenchidos){const o=document.createElement("li");o.textContent=`${i.label}: ${i.value}`,o.style.color="#2e7d32",e.appendChild(o)}for(const i of a.pendentes){const o=document.createElement("li");o.textContent=`${i.label}: ‚Äî`,o.style.color="#b26a00",t.appendChild(o)}}montarPayloadSolicitacao(e,t){return{servico:{id:e.id,nome:e.nome},imovel:{id:t.id,codigo:t.codigo,endereco:t.endereco,cep:t.cep,cidade:t.cidade,estado:t.estado,fimValidade:t.fimValidade},origem:this.usandoDadosSAP?"SAP":"Demo",criadoEm:new Date().toISOString()}}capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}setElementText(e,t){const a=document.getElementById(e);a&&(a.textContent=t)}setInputValue(e,t){const a=document.getElementById(e);a&&(a.value=t||"")}addEventListenerSafe(e,t,a){const i=document.getElementById(e);i&&i.addEventListener(t,a)}showToast(e){const t=document.getElementById("toastContainer");if(!t){alert(e);return}const a=document.createElement("div");a.textContent=e,a.style.background="#2e7d32",a.style.color="#fff",a.style.padding="10px 14px",a.style.borderRadius="6px",a.style.boxShadow="0 2px 8px rgba(0,0,0,.15)",a.style.fontSize=".95rem",a.style.maxWidth="360px",t.appendChild(a),setTimeout(()=>{a.style.transition="opacity .3s",a.style.opacity="0",setTimeout(()=>a.remove(),300)},2500)}validarData(e,t=!1){if(!e)return t;const a=e.match(/^([0-3]\d)\/(0\d|1[0-2])\/(\d{4})$/);if(!a)return!1;const i=parseInt(a[1],10),o=parseInt(a[2],10),s=parseInt(a[3],10),r=new Date(s,o-1,i);return r.getFullYear()===s&&r.getMonth()===o-1&&r.getDate()===i}mostrarErro(e,t,a){const i=document.getElementById(e);i&&(i.style.display=t?"block":"none",a&&(i.textContent=a))}formatarStatus(e){return{ativo:"Ativo",prospeccao:"Prospec√ß√£o",mobilizacao:"Mobiliza√ß√£o",desmobilizacao:"Desmobiliza√ß√£o",disponivel:"Dispon√≠vel",ocupado:"Ocupado",manutencao:"Manuten√ß√£o",vendido:"Vendido"}[e]||e}configurarTabs(){const e=document.querySelectorAll(".tab-btn"),t=document.querySelectorAll(".tab-content");e.forEach((a,i)=>{a.addEventListener("click",()=>{e.forEach(o=>o.classList.remove("active")),t.forEach(o=>o.classList.remove("active")),a.classList.add("active"),t[i]&&t[i].classList.add("active")})})}atualizarPaginacaoImoveis(){const e=(this.currentPageImoveis-1)*this.itemsPerPageImoveis+1,t=Math.min(this.currentPageImoveis*this.itemsPerPageImoveis,this.imoveis.length),a=this.imoveis.length;this.setElementText("paginationStart",e.toString()),this.setElementText("paginationEnd",t.toString()),this.setElementText("paginationTotal",a.toString()),this.gerarBotoesPaginacao()}gerarBotoesPaginacao(){const e=document.getElementById("paginationControls");if(!e)return;e.innerHTML="";const t=Math.ceil(this.imoveis.length/this.itemsPerPageImoveis);if(t<=1)return;const a=document.createElement("button");a.innerHTML="‚Üê Anterior",a.disabled=this.currentPageImoveis===1,a.addEventListener("click",()=>{this.currentPageImoveis>1&&(this.currentPageImoveis--,this.atualizarTabelaImoveis())}),e.appendChild(a);const i=5;let o=Math.max(1,this.currentPageImoveis-Math.floor(i/2)),s=Math.min(t,o+i-1);if(s-o<i-1&&(o=Math.max(1,s-i+1)),o>1){const n=document.createElement("button");if(n.textContent="1",n.addEventListener("click",()=>{this.currentPageImoveis=1,this.atualizarTabelaImoveis()}),e.appendChild(n),o>2){const l=document.createElement("button");l.textContent="...",l.disabled=!0,e.appendChild(l)}}for(let n=o;n<=s;n++){const l=document.createElement("button");l.textContent=n.toString(),l.classList.toggle("active",n===this.currentPageImoveis);const p=n;l.addEventListener("click",()=>{this.currentPageImoveis=p,this.atualizarTabelaImoveis()}),e.appendChild(l)}if(s<t){if(s<t-1){const l=document.createElement("button");l.textContent="...",l.disabled=!0,e.appendChild(l)}const n=document.createElement("button");n.textContent=t.toString(),n.addEventListener("click",()=>{this.currentPageImoveis=t,this.atualizarTabelaImoveis()}),e.appendChild(n)}const r=document.createElement("button");r.innerHTML="Pr√≥ximo ‚Üí",r.disabled=this.currentPageImoveis===t,r.addEventListener("click",()=>{this.currentPageImoveis<t&&(this.currentPageImoveis++,this.atualizarTabelaImoveis())}),e.appendChild(r)}configurarItemsPorPagina(){const e=document.getElementById("imoveisPorPaginaSelect");e&&e.addEventListener("change",()=>{const t=parseInt(e.value,10);!isNaN(t)&&t>0&&(this.itemsPerPageImoveis=t,this.currentPageImoveis=1,this.atualizarTabelaImoveis())})}configurarFiltrosImoveisImediato(){this.addEventListenerSafe("pesquisarImoveis","click",()=>{this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("limparFiltrosImoveis","click",()=>{this.limparFiltrosImoveis()}),this.addEventListenerSafe("filtroContrato","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()}),this.addEventListenerSafe("filtroDenominacao","keypress",e=>{e.key==="Enter"&&this.aplicarFiltrosImoveis()})}aplicarFiltrosImoveis(){console.log("üîç Aplicando filtros de im√≥veis...");const e=document.getElementById("filtroContrato")?.value.toLowerCase()||"",t=document.getElementById("filtroUtilizacao")?.value||"",a=document.getElementById("filtroStatus")?.value||"",i=document.getElementById("filtroDenominacao")?.value.toLowerCase()||"",o=document.getElementById("filtroDataInicio")?.value||"",s=document.getElementById("filtroDataFim")?.value||"";this.imoveis=this.imoveisOriginais.filter(r=>{if(e&&!r.codigo.toLowerCase().includes(e)||t&&r.utilizacaoPrincipal!==t)return!1;if(a){const n={Ativo:"ativo","Em Prospec√ß√£o":"prospeccao","Em Mobiliza√ß√£o":"mobilizacao","Em Desmobiliza√ß√£o":"desmobilizacao",Desativado:"desativado"};if(r.status!==n[a])return!1}if(i&&!r.denominacao.toLowerCase().includes(i))return!1;if(o||s){if(r.fimValidade){const[n,l,p]=r.fimValidade.split("/"),g=new Date(parseInt(p),parseInt(l)-1,parseInt(n));if(o){const v=new Date(o);if(g<v)return!1}if(s){const v=new Date(s);if(g>v)return!1}}else if(o||s)return!1}return!0}),this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log(`‚úÖ Filtros aplicados: ${this.imoveis.length} im√≥veis encontrados`)}limparFiltrosImoveis(){const e=document.getElementById("filtroContrato"),t=document.getElementById("filtroUtilizacao"),a=document.getElementById("filtroStatus"),i=document.getElementById("filtroDenominacao"),o=document.getElementById("filtroDataInicio"),s=document.getElementById("filtroDataFim");e&&(e.value=""),t&&(t.value=""),a&&(a.value=""),i&&(i.value=""),o&&(o.value=""),s&&(s.value=""),this.imoveis=[...this.imoveisOriginais],this.currentPageImoveis=1,this.atualizarTabelaImoveis(),this.atualizarDashboard(),console.log("üßπ Filtros limpos")}atualizarDashboard(){const e=this.calcularEstatisticas();this.setElementText("totalImoveis",e.totalImoveis.toString()),this.setElementText("imoveisAtivos",e.imoveisAtivos.toString()),this.setElementText("imoveisProspeccao",e.imoveisProspeccao.toString()),this.setElementText("imoveisMobilizacao",e.imoveisMobilizacao.toString()),this.setElementText("imoveisDesmobilizacao",e.imoveisDesmobilizacao.toString())}calcularEstatisticas(){return{totalImoveis:this.imoveis.length,imoveisAtivos:this.imoveis.filter(e=>e.status==="ativo").length,imoveisProspeccao:this.imoveis.filter(e=>e.status==="prospeccao").length,imoveisMobilizacao:this.imoveis.filter(e=>e.status==="mobilizacao").length,imoveisDesmobilizacao:this.imoveis.filter(e=>e.status==="desmobilizacao").length,totalLocadores:this.locadores.length}}}function A(){const u="https://osvaldojeronymo.github.io/silic-portal-imoveis/",e=document.referrer,t=window.location.search.includes("from=portal");(e.includes("silic-portal")||t)&&window.history.length>1?window.history.back():window.location.href=u}export{k as SistemaSILIC,A as voltarAoPortal};
